#######
#  DO NOT EDIT THIS SCRIPT UNLESS 
#  YOU WANT TO break IT
#   -- "jaseowns"
#######

## TODOS:
# - improve bot when pets get summoned (use guard)
# - send in pet if dead and then rezzed (kinda handling with retarget timer)
        # if it died and then is alive, at least use guard on menu
# - add elrich mana bar thingy ## status bar, 28135, 2617
# for TAMER - fix the  jaseowns_MyMainTamerPet so its dynamic.. maybe?

#####################################
# 05/12/2025 stream - 9.17
#  - fix ignore potion message display
#  - fix vet kit heal timer
# 05/07/2025 stream - 9.16
#  - arch protection for 4 followers
#  - variables around barding
#  - seeking behind a mana check
# 04/28/2025 stream - 9.15
#  - auto explode pot improvements
#  - red pouch pot alert
# 04/25/2025 stream - 9.14
#  - we will fix the str/agi pot changes
#  - fix herding check as well
# 04/23/2025 stream - 9.13
#  - remove bandaging command and replace with custom timer
#  - you can summon without spirit speak jaseowns_FORCE_SUMMON_PETS = 1
#  - you can now summon 5 summon creatures
#  - str pot is dynamic based on hp - handles blood aspect (agi next..)
# 04/21/2025 stream - 9.12
#  - hide necreo overheads behind varcheck (jaseowns_ShowUsedNecroAbilityOverhead)
#  - add cooldowns for weapon ability and poison strike
# 04/18/2025 stream - 9.11 
#  - use diffhits instead of hp jaseowns_HitDiffCheckToCastHeal
#  - fix target switch
# 04/16/2025 stream - 9.10
#  - improve corpse skin and mindrot firing for necro
#  - jaseowns_CastCorpseSkinAndMindRotAtTheSameTimeMinMana
#  - jaseowns_WeCastedSuccessfullyTimerCD for poison / pain strike abilities
#  - added jaseowns_SwitchToTestudoWhileMoving if you want it
# 04/14/2025 stream - 9.9
#   - updated Mana Thief check (needs a cooldown in game) and switch to Seeking weapon ability jaseowns_UseSeekingWhenManaThiefIsProcced
#   - reset timers when Weapon ability ready system message comes in 
#   - remove unused potion timers and variables
#   - fix bug with jaseowns_AvoidCastingWhileMovingCD being 0 (you can now set it to 0)
# 04/11/2025 stream - 9.8
#   - fix potion buff check and update the logic a bit
#   - (might break stuff) updated clearsysmsg to use while statements.. this is gonna be good or bad
#   - added ribs to cooking snack check
# 04/09/2025 stream - 9.7
#   - fixed object error
# 01/15/2025 stream - 9.6
#   - fix ev/blade spirit checks (body id)
#   - fixed herding activate check
#   - re-poison if expired
# 12/27/2024 stream - 9.5
#   handle not spamming all kill if no real summons
# 12/18/2024 stream - 9.4
#   -[x] added snacking
# 11/20/2024 stream - 9.3
#   -[x] fixed cheese
#   -[x] improve necro symbol count (add reserve)
# 11/20/2024 stream - 9.2 
#   -[x] Removed unused vars from base 
#   -[x] Added poison strike if using corpse skin
#   -[x] drop off gold if overweight
# 9/20/2024 stream - 9.1
#####################################
if jaseowns_ShowVersion = 1
    overhead "Mage Bot File 9.17" 76
endif
#####################################

#######
# Ultimate Mage Summoner Necro Bot Rewrite 2024 by Jaseowns
# UO Outlands - jaseowns.com/discord
# https://outlands.uorazorscripts.com/arcane-mage
#####################


# Set this to 0 to always cast, 500 for half a second, 1000 for full second
# Requires "Moving" cooldown (Alt-o cooldowns)
if not varexist jaseowns_AvoidCastingWhileMovingCD
    @setvar! jaseowns_AvoidCastingWhileMovingCD 500
endif
if not varexist jaseowns_HpCheckToInterruptCastIfLessThan
    @setvar! jaseowns_HpCheckToInterruptCastIfLessThan 40
endif
if not varexist jaseowns_HpCheckToDrinkPotionCastIfLessThan
    @setvar! jaseowns_HpCheckToDrinkPotionCastIfLessThan 75
endif
if not varexist jaseowns_TauntingTimerCD
    @setvar! jaseowns_TauntingTimerCD 15000
endif
if not varexist jaseowns_CheckParryCodexMinMana
    @setvar! jaseowns_CheckParryCodexMinMana 25
endif
if not varexist jaseowns_CheckParryCodexTimerCD
    @setvar! jaseowns_CheckParryCodexTimerCD 1000
endif
if not varexist jaseowns_EatSnackAtDiffMana
    @setvar! jaseowns_EatSnackAtDiffMana 40
endif
if not varexist jaseowns_EatSnackTimerCD
    @setvar! jaseowns_EatSnackTimerCD 60000
endif
if not timerexists jaseowns_EatSnackTimer
    settimer jaseowns_EatSnackTimer jaseowns_EatSnackTimerCD
endif
if not varexist jaseowns_CastCorpseSkinAndMindRotAtTheSameTimeMinMana
    @setvar! jaseowns_CastCorpseSkinAndMindRotAtTheSameTimeMinMana 20
endif
if not varexist jaseowns_WeCastedSuccessfullyTimerCD
    @setvar! jaseowns_WeCastedSuccessfullyTimerCD 5000
endif


#####
## ONLY USED FOR TAMERS AT THE MOMENT
## Set Your Pet Variable Serial (>info on your main pet)
## IF YOU ARE A SUMMONER OR ARCANE WIZARD - NO NEED TO CHANGE
###
if not varexist jaseowns_MyMainTamerPet
    if findtype "mycoolpetname" ground -1 -1 18 as jaseowns_FoundThisPet
        @setvar! jaseowns_MyMainTamerPet jaseowns_FoundThisPet    
    else
        @setvar! jaseowns_MyMainTamerPet 0x5280CF
    endif
endif
if not varexist jaseowns_WarnMeAtThisDiffWeight
    @setvar! jaseowns_WarnMeAtThisDiffWeight 10
endif
if not varexist jaseowns_WarnMeAtThisDiffWeightTimerCD
    @setvar! jaseowns_WarnMeAtThisDiffWeightTimerCD 2000
endif
if not varexist jaseowns_VetKitTimerCD
    @setvar! jaseowns_VetKitTimerCD 5000
endif

#####
## Using Mushroom
###
if not varexist jaseowns_EatShroomies
    @setvar! jaseowns_EatShroomies 1
endif
if not varexist jaseowns_EatShroomiesTimerCD
    @setvar! jaseowns_EatShroomiesTimerCD 60000
endif
if not varexist jaseowns_EatShroomiesAtDiffMana
    @setvar! jaseowns_EatShroomiesAtDiffMana 35
endif
#####
## Casting Mushroom
###
if not varexist jaseowns_CastMagicMushroomCount
    @setvar! jaseowns_CastMagicMushroomCount 10
endif
if not varexist jaseowns_CastMagicMushroomIfBelowCount
    @setvar! jaseowns_CastMagicMushroomIfBelowCount 5
endif

###
## Reuses ALL KILL after target selection (to confirm we fighting)
###
if not varexist jaseowns_UseAllKillOnSameTargetEverySomeSeconds
    @setvar! jaseowns_UseAllKillOnSameTargetEverySomeSeconds 5000
endif


if not varexist jaseowns_UseMeditationAtManaDiff
    @setvar! jaseowns_UseMeditationAtManaDiff 79
endif
if not varexist jaseowns_UseMeditationMinimalAmountTimerCD
    @setvar! jaseowns_UseMeditationMinimalAmountTimerCD 8000
endif
if not varexist jaseowns_OkayToCancelMeditateAtHealthCheckDiff
    @setvar! jaseowns_OkayToCancelMeditateAtHealthCheckDiff 30
endif

#####
## Setup your Pots
###

if not varexist jaseowns_UseHealPotionTimerCD
    @setvar! jaseowns_UseHealPotionTimerCD 10000
endif
if not varexist jaseowns_UseHealPotionAtHealthDiff
    @setvar! jaseowns_UseHealPotionAtHealthDiff 60
endif

# This will be used to grab from keg if you have one
if not varexist jaseowns_HealthPotCountInBackpack
    @setvar! jaseowns_HealthPotCountInBackpack 2
endif
if not varexist jaseowns_CurePotCountInBackpack
    @setvar! jaseowns_CurePotCountInBackpack 2
endif
if not varexist jaseowns_ExplosionPotCountInBackpack
    @setvar! jaseowns_ExplosionPotCountInBackpack 2
endif
if not varexist jaseowns_StrengthPotCountInBackpack
    @setvar! jaseowns_StrengthPotCountInBackpack 2
endif
if not varexist jaseowns_MagicResistPotCountInBackpack
    @setvar! jaseowns_MagicResistPotCountInBackpack 2
endif
if not varexist jaseowns_RefreshPotCountInBackpack
    @setvar! jaseowns_RefreshPotCountInBackpack 2
endif
if not varexist jaseowns_AgilityPotCountInBackpack
    @setvar! jaseowns_AgilityPotCountInBackpack 2
endif
# Overhead counts (helps to know when low)
if not varexist jaseowns_OverheadAlertsAboutPotionsTimerCD
    @setvar! jaseowns_OverheadAlertsAboutPotionsTimerCD 5000
endif
if not varexist jaseowns_NoEmptyBottlesAlert
    @setvar! jaseowns_NoEmptyBottlesAlert 1
endif
if not varexist jaseowns_HealPotOverheadAlert
    @setvar! jaseowns_HealPotOverheadAlert 1
endif
if not varexist jaseowns_CurePotOverheadAlert
    @setvar! jaseowns_CurePotOverheadAlert 1
endif
if not varexist jaseowns_ExplosionPotOverheadAlert
    @setvar! jaseowns_ExplosionPotOverheadAlert 0
endif
if not varexist jaseowns_StrengthPotOverheadAlert
    @setvar! jaseowns_StrengthPotOverheadAlert 1
endif
if not varexist jaseowns_MagicResistPotOverheadAlert
    @setvar! jaseowns_MagicResistPotOverheadAlert 0
endif
if not varexist jaseowns_RefreshPotOverheadAlert
    @setvar! jaseowns_RefreshPotOverheadAlert 0
endif
if not varexist jaseowns_AgilityPotOverheadAlert
    @setvar! jaseowns_AgilityPotOverheadAlert 0
endif

if not varexist jaseowns_UseCurePotionAtHealthDiff
    @setvar! jaseowns_UseCurePotionAtHealthDiff 0
endif

if not varexist jaseowns_UseRefreshPotionTimerCD
    @setvar! jaseowns_UseRefreshPotionTimerCD 3000
endif
if not varexist jaseowns_UseRefreshPotionAtStamDiff
    @setvar! jaseowns_UseRefreshPotionAtStamDiff 5
endif

if not varexist jaseowns_UseStrengthPotionOnlyInWarMode
    @setvar! jaseowns_UseStrengthPotionOnlyInWarMode 1
endif

if not varexist jaseowns_PoisonStrikeTimerCD
    @setvar! jaseowns_PoisonStrikeTimerCD 30500
endif

if not varexist jaseowns_EvilOmenTimerCD
    @setvar! jaseowns_EvilOmenTimerCD 30500
endif

if not varexist jaseowns_CorpseSkinTimerCD
    @setvar! jaseowns_CorpseSkinTimerCD 30500
endif

if not varexist jaseowns_VampiricEmbraceTimerCD
    @setvar! jaseowns_VampiricEmbraceTimerCD 30500
endif

if not varexist jaseowns_MindRotTimerCD
    @setvar! jaseowns_MindRotTimerCD 30500
endif

if not varexist jaseowns_BloodOathTimerCD
    @setvar! jaseowns_BloodOathTimerCD 30500
endif

if not varexist jaseowns_StrangleTimerCD
    @setvar! jaseowns_StrangleTimerCD 30500
endif

if not varexist jaseowns_PainSpikeTimerCD
    @setvar! jaseowns_PainSpikeTimerCD 30500    
endif

if not varexist jaseowns_WitherTimerCD
    @setvar! jaseowns_WitherTimerCD 30500
endif
if not varexist jaseowns_VengefulSpiritTimerCD
    @setvar! jaseowns_VengefulSpiritTimerCD 30500
endif



#####
## Setup your Spells
###

# 5     Magic Arrow
# 12    Harm
# 18    Fireball
# 20    Poison
# 27    Curse
# 30    Lightning
# 31    Mana Drain
# 37    Mind Blast
# 42    Energy Bolt
# 43    Explosion
# 46    Mass Curse
# 49    Chain Lightning
# 51    Flamestrike
# 53    Mana Vampire
# 55    Meteor Swarm
# 57    Earthquake

# Poison  ## Set jaseowns_CastPoisonTimerCD to 0 if you want to spam for Lethal

if not varexist jaseowns_CastPoisonTimerCD
    @setvar! jaseowns_CastPoisonTimerCD 2000
endif
if not varexist jaseowns_CastPoisonMinMana
    @setvar! jaseowns_CastPoisonMinMana 20
endif
if not varexist jaseowns_Precast_Spell_One
    @setvar! jaseowns_Precast_Spell_One 0
endif
if not varexist jaseowns_Precast_Spell_Two
    @setvar! jaseowns_Precast_Spell_Two 0
endif
if not varexist jaseowns_1st_Spell
    @setvar! jaseowns_1st_Spell 30
endif
if not varexist jaseowns_1st_SpellMinMana
    @setvar! jaseowns_1st_SpellMinMana 12
endif
if not varexist jaseowns_1st_SpellTimerCD
    @setvar! jaseowns_1st_SpellTimerCD 20000
endif
if not varexist jaseowns_2nd_Spell
    @setvar! jaseowns_2nd_Spell 5
endif
if not varexist jaseowns_2nd_SpellMinMana
    @setvar! jaseowns_2nd_SpellMinMana 12
endif
if not varexist jaseowns_2nd_SpellTimerCD
    @setvar! jaseowns_2nd_SpellTimerCD 20000
endif
if not varexist jaseowns_3rd_Spell
    @setvar! jaseowns_3rd_Spell 51
endif
if not varexist jaseowns_3rd_SpellMinMana
    @setvar! jaseowns_3rd_SpellMinMana 70
endif
if not varexist jaseowns_3rd_SpellTimerCD
    @setvar! jaseowns_3rd_SpellTimerCD 0
endif
if not varexist jaseowns_4th_Spell
    @setvar! jaseowns_4th_Spell 37
endif
if not varexist jaseowns_4th_SpellMinMana
    @setvar! jaseowns_4th_SpellMinMana 20
endif
if not varexist jaseowns_4th_SpellTimerCD
    @setvar! jaseowns_4th_SpellTimerCD 0
endif
if not varexist jaseowns_5th_Spell
    @setvar! jaseowns_5th_Spell 0
endif
if not varexist jaseowns_5th_SpellMinMana
    @setvar! jaseowns_5th_SpellMinMana 80
endif
if not varexist jaseowns_5th_SpellTimerCD
    @setvar! jaseowns_5th_SpellTimerCD 0
endif
if not varexist jaseowns_6th_Spell
    @setvar! jaseowns_6th_Spell 0
endif
if not varexist jaseowns_6th_SpellMinMana
    @setvar! jaseowns_6th_SpellMinMana 70
endif
if not varexist jaseowns_6th_SpellTimerCD
    @setvar! jaseowns_6th_SpellTimerCD 0
endif
if not varexist jaseowns_7th_Spell
    @setvar! jaseowns_7th_Spell 0
endif
if not varexist jaseowns_7th_SpellMinMana
    @setvar! jaseowns_7th_SpellMinMana 20
endif
if not varexist jaseowns_7th_SpellTimerCD
    @setvar! jaseowns_7th_SpellTimerCD 0
endif
if not varexist jaseowns_CastBlessMinMana
    @setvar! jaseowns_CastBlessMinMana 12
endif
if not varexist jaseowns_CastReactiveArmorMinMana
    @setvar! jaseowns_CastReactiveArmorMinMana 12
endif
if not varexist jaseowns_CastArchProtectionMinMana
    @setvar! jaseowns_CastArchProtectionMinMana 14
endif
if not varexist jaseowns_CastMagicReflectionMinMana
    @setvar! jaseowns_CastMagicReflectionMinMana 14
endif
if not varexist jaseowns_HitDiffCheckToCastHeal
    @setvar! jaseowns_HitDiffCheckToCastHeal 28
endif
if not varexist jaseowns_CastGreaterHealMinMana
    @setvar! jaseowns_CastGreaterHealMinMana 12
endif
if not varexist jaseowns_CastCureMinMana
    @setvar! jaseowns_CastCureMinMana 6
endif

###############
###  Choose your summons
######
if not varexist jaseowns_CastToMaxFollowers
    @setvar! jaseowns_CastToMaxFollowers 4
endif
if not varexist castSummonEarthElementalCount
    # Earth: 0, 1, 2
    @setvar! castSummonEarthElementalCount 0
endif
if not varexist castSummonMummyCount
    @setvar! castSummonMummyCount 0
endif
if not varexist castSummonFireElementalCount
    # Fire: 0, 1, 2
    @setvar! castSummonFireElementalCount 0
endif
if not varexist castSummonLichCount
    @setvar! castSummonLichCount 0
endif
if not varexist castSummonDemonCount
    # Demon: 0, 1, 2
    @setvar! castSummonDemonCount 0
endif
if not varexist castSummonThrallCount
    @setvar! castSummonThrallCount 1
endif
if not varexist castSummonAirCount
    # Air: 0, 1, 2
    @setvar! castSummonAirCount 0
endif
if not varexist castSummonFiendCount
    @setvar! castSummonFiendCount 1
endif
if not varexist castSummonWaterCount
    # Water: 0, 1, 2
    @setvar! castSummonWaterCount 0
endif
if not varexist castSummonRagWitchCount
    @setvar! castSummonRagWitchCount 0
endif
if not varexist castSummonCreatureCount
    # Creature: 0, 1, 2, 3, 4, 5
    @setvar! castSummonCreatureCount 1
endif
if not varexist castEnergyVortexCount
    # Energy Vortex: 0, 1
    @setvar! castEnergyVortexCount 0
endif
if not varexist castJackalSpiritCount
    @setvar! castJackalSpiritCount 0
endif
if not varexist castBladeSpiritCount
    # Blade Spirit: 0, 1
    @setvar! castBladeSpiritCount 0
endif
if not varexist castSkeletalHuskCount
    @setvar! castSkeletalHuskCount 0
endif
if not varexist jaseowns_UseKeyLimePieAbilityMana
    @setvar! jaseowns_UseKeyLimePieAbilityMana 70
endif
if not varexist jaseowns_UseSeekingWhenManaThiefIsProccedManaCheck
    @setvar! jaseowns_UseSeekingWhenManaThiefIsProccedManaCheck 70
endif


if not varexist jaseowns_DynamicMaxHP 
    @setvar! jaseowns_DynamicMaxHP 0
endif

if not varexist jaseowns_DynamicMaxAGI
    @setvar! jaseowns_DynamicMaxAGI 0
endif


if not varexist jaseowns_Bard_PeaceAutomatically 
    @setvar! jaseowns_Bard_PeaceAutomatically 0
endif

if not varexist jaseowns_Bard_DiscordAutomatically 
    @setvar! jaseowns_Bard_DiscordAutomatically 0
endif

##################################################################
# 
#   Hopefully you do not have to edit after this :)
#       twitch.tv/jaseowns/subscribe
#       youtube.com/jaseowns/join
#
##################################################################


###############
### NO NEED TO EDIT BELOW HERE unless you are NOX, go ahead buddy.
###############

# Force Poison on if we have the skill
if skill "Poisoning" >= 80
    @setvar! jaseowns_CastPoison 1
endif

####
# Weapon abilities
###

if skill "Arcane" < 50
    @setvar! jaseowns_UseAbility1 0
    @setvar! jaseowns_UseAbility2 0
    @setvar! jaseowns_UseAbility3 0
else
    @setvar! jaseowns_UseAbility1 0
    @setvar! jaseowns_UseAbility2 1
    @setvar! jaseowns_UseAbility3 0
endif

@setvar! jaseowns_UseAbilityTimerCD 5000

if skill "Alchemy" < 80
    @setvar! jaseowns_CastCunningOnly 0
    @setvar! jaseowns_AutoExplodePot 0
    @setvar! jaseowns_HasPanacea 0
endif

@setvar! jaseowns_AutoExplodePotTimerCD 15000
if not timerexists jaseowns_AutoExplodePotTimer
    settimer jaseowns_AutoExplodePotTimer jaseowns_AutoExplodePotTimerCD
endif


@setvar! jaseowns_CastCurse_1st 0
@setvar! jaseowns_CastCurse_2nd 0
@setvar! jaseowns_CastManaDrain_1st 0
@setvar! jaseowns_CastManaDrain_2nd 0

@setvar! jaseowns_Precast_Spell_One_TimerCD 0
@setvar! jaseowns_Precast_Spell_One_MinMana 0
if jaseowns_Precast_Spell_One = 27 or jaseowns_Precast_Spell_One = 31
    if jaseowns_Precast_Spell_One = 27 
        @setvar! jaseowns_CastCurse_1st 1
    elseif jaseowns_Precast_Spell_One = 31 
        @setvar! jaseowns_CastManaDrain_1st 1
    endif
    @setvar! jaseowns_Precast_Spell_One_TimerCD 60000
    @setvar! jaseowns_Precast_Spell_One_MinMana 12
elseif jaseowns_Precast_Spell_One = 53
    @setvar! jaseowns_Precast_Spell_One_TimerCD 300000
endif

@setvar! jaseowns_Precast_Spell_Two_TimerCD 0
@setvar! jaseowns_Precast_Spell_Two_MinMana 0
if jaseowns_Precast_Spell_Two = 27 or jaseowns_Precast_Spell_Two = 31

    if jaseowns_Precast_Spell_Two = 27 
        @setvar! jaseowns_CastCurse_2nd 1
    elseif jaseowns_Precast_Spell_Two = 31 
        @setvar! jaseowns_CastManaDrain_2nd 1
    endif
    
    @setvar! jaseowns_Precast_Spell_Two_TimerCD 60000
    @setvar! jaseowns_Precast_Spell_Two_MinMana 12
elseif jaseowns_Precast_Spell_Two = 53
    @setvar! jaseowns_Precast_Spell_Two_TimerCD 300000
endif



// curse
// once per target per 60 seconds
// the timer needs to know about who you are currently targetting
// if the target changes, you need to reset the timer? can we have multiple timers?
// mana drain
// once per target per 60 seconds
// mana vampire
// once per target per 5 minutes

if not timerexists jaseowns_Precast_Spell_One_Timer
    settimer jaseowns_Precast_Spell_One_Timer jaseowns_Precast_Spell_One_TimerCD
endif

if not timerexists jaseowns_Precast_Spell_Two_Timer
    settimer jaseowns_Precast_Spell_Two_Timer jaseowns_Precast_Spell_Two_TimerCD
endif

if not timerexists jaseowns_1st_SpellTimer
    settimer jaseowns_1st_SpellTimer jaseowns_1st_SpellTimerCD
endif

if not timerexists jaseowns_2nd_SpellTimer
    settimer jaseowns_2nd_SpellTimer jaseowns_2nd_SpellTimerCD
endif

if not timerexists jaseowns_3rd_SpellTimer
    settimer jaseowns_3rd_SpellTimer jaseowns_3rd_SpellTimerCD
endif

if not timerexists jaseowns_4th_SpellTimer
    settimer jaseowns_4th_SpellTimer jaseowns_4th_SpellTimerCD
endif

if not timerexists jaseowns_5th_SpellTimer
    settimer jaseowns_5th_SpellTimer jaseowns_5th_SpellTimerCD
endif

if not timerexists jaseowns_6th_SpellTimer
    settimer jaseowns_6th_SpellTimer jaseowns_6th_SpellTimerCD
endif

if not timerexists jaseowns_7th_SpellTimer
    settimer jaseowns_7th_SpellTimer jaseowns_7th_SpellTimerCD
endif

if not timerexists jaseowns_CastPoisonTimer
    settimer jaseowns_CastPoisonTimer jaseowns_CastPoisonTimerCD
endif

@setvar! jaseowns_UseSkillTimerCD 10200
if not timerexists jaseowns_UseSkillTimer
    settimer jaseowns_UseSkillTimer jaseowns_UseSkillTimerCD
endif

@setvar! jaseowns_CastCurseTimerCD 60000
@setvar! jaseowns_CastManaDrainTimerCD 60000

#####
## State Variables used by the Script Logic
###
@setvar! jaseowns_BOT_STATE 10
@setvar! jaseowns_BOT_STATE_PREVIOUS 0
@setvar! jaseowns_BOT_TARGET 0
@setvar! jaseowns_BOT_TARGET_PREVIOUS 0

@setvar! jaseowns_ArmsLoreCheckTimerCD 8000
settimer jaseowns_ArmsLoreCheckTimer jaseowns_ArmsLoreCheckTimerCD

# Timers (do not touch)
if not timerexists jaseowns_VetKitTimer
    settimer jaseowns_VetKitTimer jaseowns_VetKitTimerCD
endif
if not timerexists jaseowns_EatShroomiesTimer
    settimer jaseowns_EatShroomiesTimer jaseowns_EatShroomiesTimerCD
endif

if not timerexists jaseowns_UseHealPotionTimer
    settimer jaseowns_UseHealPotionTimer jaseowns_UseHealPotionTimerCD
endif
if not timerexists jaseowns_UseRefreshPotionTimer
    settimer jaseowns_UseRefreshPotionTimer jaseowns_UseRefreshPotionTimerCD
endif
if not timerexists jaseowns_UseMeditationMinimalAmountTimer
    settimer jaseowns_UseMeditationMinimalAmountTimer jaseowns_UseMeditationMinimalAmountTimerCD
endif

@setvar! jaseowns_BOT_TARGET_SELECTED_TIMER_CD 5000
if not timerexists jaseowns_BOT_TARGET_SELECTED_TIMER
    settimer jaseowns_BOT_TARGET_SELECTED_TIMER jaseowns_BOT_TARGET_SELECTED_TIMER_CD
endif

if not timerexists jaseowns_CastReactiveArmorTimer
    settimer jaseowns_CastReactiveArmorTimer 60000
endif
if not timerexists jaseowns_CastMagicReflectionTimer
    settimer jaseowns_CastMagicReflectionTimer 60000
endif

if not timerexists jaseowns_CastArchProtectionTimer
    settimer jaseowns_CastArchProtectionTimer 60000
endif

 
if not timerexists jaseowns_UseAbility1Timer
    settimer jaseowns_UseAbility1Timer 30000
endif

if not timerexists jaseowns_UseAbility2Timer
    settimer jaseowns_UseAbility2Timer 30000
endif

if not timerexists jaseowns_UseAbility3Timer
    settimer jaseowns_UseAbility3Timer 30000
endif

if not timerexists jaseowns_TauntingTimer
    settimer jaseowns_TauntingTimer jaseowns_TauntingTimerCD
endif

@setvar! jaseowns_UsePanaceaTimerCD 30000
if not timerexists jaseowns_UsePanaceaTimer
    settimer jaseowns_UsePanaceaTimer jaseowns_UsePanaceaTimerCD
endif

@setvar! jaseowns_ActiveParryCodex 0
if not timerexists jaseowns_CheckParryCodexTimer
    settimer jaseowns_CheckParryCodexTimer jaseowns_CheckParryCodexTimerCD
endif



## NECRO TIMERS

###############
### Necro Cooldowns
######
if skill "Necromancy" >= 50

    @setvar! jaseowns_UsedNecroAbilityTimerCD 650
    if not timerexists jaseowns_UsedNecroAbilityTimer
        settimer jaseowns_UsedNecroAbilityTimer jaseowns_UsedNecroAbilityTimerCD
    endif

    if not timerexists jaseowns_EvilOmenTimer
        settimer jaseowns_EvilOmenTimer jaseowns_EvilOmenTimerCD
    endif
    if not timerexists jaseowns_VampiricEmbraceTimer
        settimer jaseowns_VampiricEmbraceTimer jaseowns_VampiricEmbraceTimerCD
    endif
    if not timerexists jaseowns_CorpseSkinTimer
        settimer jaseowns_CorpseSkinTimer jaseowns_CorpseSkinTimerCD
    endif
    if not timerexists jaseowns_MindRotTimer
        settimer jaseowns_MindRotTimer jaseowns_MindRotTimerCD
    endif
    if not timerexists jaseowns_StrangleTimer
        settimer jaseowns_StrangleTimer jaseowns_StrangleTimerCD
    endif
    if not timerexists jaseowns_BloodOathTimer
        settimer jaseowns_BloodOathTimer jaseowns_BloodOathTimerCD
    endif
    if not timerexists jaseowns_PainSpikeTimer
        settimer jaseowns_PainSpikeTimer jaseowns_PainSpikeTimerCD
    endif
    if not timerexists jaseowns_PoisonStrikeTimer
        settimer jaseowns_PoisonStrikeTimer jaseowns_PoisonStrikeTimerCD
    endif
endif
    
if not timerexists jaseowns_WitherTimer
    settimer jaseowns_WitherTimer jaseowns_WitherTimerCD
endif
    
if not timerexists jaseowns_VengefulSpiritTimer
    settimer jaseowns_VengefulSpiritTimer jaseowns_VengefulSpiritTimerCD
endif

if not listexists jaseowns_CastedCrusedList
    createlist jaseowns_CastedCrusedList
endif

if not listexists jaseowns_CastedPoisonList
    createlist jaseowns_CastedPoisonList
endif

if not listexists jaseowns_CastedManaDrainList
    createlist jaseowns_CastedManaDrainList
endif

if jaseowns_UseMeditationAutomatically = 1 and skill "Meditation" = 0
    @setvar! jaseowns_UseMeditationAutomatically 0
endif

############
### UNUSED FOR NOW
@setvar! jaseowns_UseItemTimerCD 500
settimer jaseowns_UseItemTimer jaseowns_UseItemTimerCD
@setvar! jaseowns_MyOtherPet 0x577A4A
@setvar! jaseowns_MyOtherOtherPet 0x475F01
####################


@clearignore 
clearsysmsg 

@setvar! jaseowns_SKIP_LAST_TARGET 0


if skill "Veterinary" < 50
    @setvar! jaseowns_UseVetKits 0
endif

if skill "Parry" < 80
    @setvar! jaseowns_AutoTaunting 0
endif

#####
### Herding
if not varexist myAwesomeCrookThatIsActivated
    @setvar! myAwesomeCrookThatIsActivated 0
endif

# Reset all the scoped bot stuff each time the script starts
removelist jaseowns_IGNORE_CREATURES
createlist jaseowns_IGNORE_CREATURES

@setvar! jaseowns_BOT_TARGET_PREVIOUS 0
@setvar! jaseowns_BOT_TARGET 0
@setvar! jaseowns_USER_LAST_TARGET 0

@setvar! jaseowns_SUMMONER_MAYBE 0
if jaseowns_FORCE_SUMMON_PETS = 1
    @setvar! jaseowns_SUMMONER_MAYBE 1
elseif skill "Magery" >= 50 and skill "Animal Taming" < 50 and skill "Spirit Speak" >= 50
    @setvar! jaseowns_SUMMONER_MAYBE 1
endif

// we are maybe a summoner bro
if jaseowns_SUMMONER_MAYBE = 1

    # Reset the pets
    if dead jaseowns_EarthPetOne or not find jaseowns_EarthPetOne ground -1 -1 18
        @setvar! jaseowns_EarthPetOne 0
    endif
    if dead jaseowns_EarthPetTwo or not find jaseowns_EarthPetTwo ground -1 -1 18
        @setvar! jaseowns_EarthPetTwo 0
    endif
    if dead jaseowns_FirePetOne or not find jaseowns_FirePetOne ground -1 -1 18
        @setvar! jaseowns_FirePetOne 0
    endif
    if dead jaseowns_FirePetTwo or not find jaseowns_FirePetTwo ground -1 -1 18
        @setvar! jaseowns_FirePetTwo 0
    endif
    if dead jaseowns_DemonPetOne or not find jaseowns_DemonPetOne ground -1 -1 18
        @setvar! jaseowns_DemonPetOne 0
    endif
    if dead jaseowns_DemonPetTwo or not find jaseowns_DemonPetTwo ground -1 -1 18
        @setvar! jaseowns_DemonPetTwo 0
    endif
    if dead jaseowns_WaterPetOne or not find jaseowns_WaterPetOne ground -1 -1 18
        @setvar! jaseowns_WaterPetOne 0
    endif
    if dead jaseowns_WaterPetTwo or not find jaseowns_WaterPetTwo ground -1 -1 18
        @setvar! jaseowns_WaterPetTwo 0
    endif
    if dead jaseowns_AirPetOne or not find jaseowns_AirPetOne ground -1 -1 18
        @setvar! jaseowns_AirPetOne 0
    endif
    if dead jaseowns_AirPetTwo or not find jaseowns_AirPetTwo ground -1 -1 18
        @setvar! jaseowns_AirPetTwo 0
    endif
    if dead jaseowns_SummonCreaturePetOne or not find jaseowns_SummonCreaturePetOne ground -1 -1 18
        @setvar! jaseowns_SummonCreaturePetOne 0
    endif
    if dead jaseowns_SummonCreaturePetTwo or not find jaseowns_SummonCreaturePetTwo ground -1 -1 18
        @setvar! jaseowns_SummonCreaturePetTwo 0
    endif
    if dead jaseowns_SummonCreaturePetThree or not find jaseowns_SummonCreaturePetThree ground -1 -1 18
        @setvar! jaseowns_SummonCreaturePetThree 0
    endif
    if dead jaseowns_SummonCreaturePetFour or not find jaseowns_SummonCreaturePetFour ground -1 -1 18
        @setvar! jaseowns_SummonCreaturePetFour 0
    endif
    if dead jaseowns_SummonCreaturePetFive or not find jaseowns_SummonCreaturePetFive ground -1 -1 18
        @setvar! jaseowns_SummonCreaturePetFive 0
    endif
    if dead jaseowns_EvPetOne or not find jaseowns_EvPetOne ground -1 -1 18
        @setvar! jaseowns_EvPetOne 0
    endif
    if dead jaseowns_BsPetOne or not find jaseowns_BsPetOne ground -1 -1 18
        @setvar! jaseowns_BsPetOne 0
    endif
endif

 ### TOOD: jase
## when a user has less than 5 followers, calculate if we need to summon.. 
## maybe we dont
## 
###

@setvar! jaseowns_BOT_BARD_STATE 0

@setvar! jaseowns_BOT_BARD_PEACED 1
@setvar! jaseowns_BOT_BARD_DISCORDED 1

if skill "Peacemaking" >= 50 and jaseowns_Bard_PeaceAutomatically = 1
    @setvar! jaseowns_BOT_BARD_STATE 1
    @setvar! jaseowns_BOT_BARD_PEACED 0
endif

if skill "Discordance" >= 50 and jaseowns_Bard_DiscordAutomatically = 1
    @setvar! jaseowns_BOT_BARD_STATE 1
    @setvar! jaseowns_BOT_BARD_DISCORDED 0
endif

@setvar! jaseowns_HoldingHealForSomeReason 0


@setvar! jaseowns_ArcaneStaffWeapon 0

if findlayer self lefthand as jaseowns_LeftHand
    @setvar! jaseowns_ArcaneStaffWeapon jaseowns_LeftHand  
endif

if jaseowns_EatShroomiesTimerCD = 60000
    @setvar! jaseowns_EatShroomiesTimerCD 65000
elseif jaseowns_EatShroomiesTimerCD = 120000
    @setvar! jaseowns_EatShroomiesTimerCD 125000
elseif jaseowns_EatShroomiesTimerCD = 240000
    @setvar! jaseowns_EatShroomiesTimerCD 245000
endif

settimer jaseowns_WarnMeAtThisDiffWeightTimer jaseowns_WarnMeAtThisDiffWeightTimerCD
settimer jaseowns_OverheadAlertsAboutPotionsTimer jaseowns_OverheadAlertsAboutPotionsTimerCD

if skill "Arms Lore" >= 80
    @setvar! jaseowns_WeaponAbilityCooldownBasedOnArmsLore 30000
else
    @setvar! jaseowns_WeaponAbilityCooldownBasedOnArmsLore 60000
endif

@setvar! jaseowns_BandageTimerCD 20000
if not timerexists jaseowns_BandageTimer
    settimer jaseowns_BandageTimer jaseowns_BandageTimerCD
endif

@setvar! jaseowns_RedPouchCountTotal 0

// loop shit inside here
while not dead

    if jaseowns_Thief_AlertRedPouchPop = 1 and counttype 3705 backpack 38 as jaseowns_RedPouchCount
        if jaseowns_RedPouchCountTotal != 0 and jaseowns_RedPouchCountTotal != jaseowns_RedPouchCount
            overhead "Warning: THIEF we lost a pouch!" 34
        else
            @setvar! jaseowns_RedPouchCountTotal jaseowns_RedPouchCount    
        endif
    endif

    if followers > 0 and skill "Herding" > 0 
        if not find myAwesomeCrookThatIsActivated self
            if followers > 0 and skill "Herding" > 0 and findtype 3713 self as firstJrook
                @setvar! isHerdingActive 0
                while isHerdingActive = 0
                    if counttype 3713 self > 1
                        @clearignore 
                        while findtype 3713 self as jrook
                            getlabel jrook multiDesc
                            if 'activated' in multiDesc
                                @setvar! isHerdingActive jrook
                                break
                            endif
                            @ignore jrook
                        endwhile
                        @clearignore 
                        if isHerdingActive = 0
                            dclick firstJrook
                        endif
                    endif
                    
                    if isHerdingActive = 0
                        getlabel firstJrook desc
                        if 'activated' in desc
                            @setvar! isHerdingActive firstJrook
                        else
                            dclick firstJrook
                            getlabel firstJrook desc
                            @setvar! isHerdingActive firstJrook
                        endif 
                    endif
                endwhile
                @setvar! myAwesomeCrookThatIsActivated isHerdingActive
            endif
        else
            getlabel myAwesomeCrookThatIsActivated checkForActive
            if "active" in checkForActive
                // do nothing
            else
                @setvar! myAwesomeCrookThatIsActivated 0
            endif
        endif
    endif

    if varexist jaseowns_Weight_GoldToDropIfOverweight and weight > maxweight and timer jaseowns_UseItemTimer >= jaseowns_UseItemTimerCD
        if findtype "gold coin" backpack as item
            lift item jaseowns_Weight_GoldToDropIfOverweight
            droprelloc 0 0
            getlabel backpack jaseowns_PingCheck
            if insysmsg "cannot drop anything"
                drop backpack -1 -1 -1
            endif
            settimer jaseowns_UseItemTimer 0
        else
            overhead "We are overweight and cannot drop anything" 34
        endif
    endif

    if hidden and jaseowns_AutoStopScriptIfHidden = 1
        overhead "We hiding, so we stopped the script!"
        sysmsg "We hiding, so we stopped the script!"
        warmode off
        stop
    endif

    if timer jaseowns_WarnMeAtThisDiffWeightTimer >= jaseowns_WarnMeAtThisDiffWeightTimerCD
        if diffweight <= jaseowns_WarnMeAtThisDiffWeight or weight >= maxweight 
            overhead "WARN: {{jaseowns_WarnMeAtThisDiffWeight}} reached! Drop weight" 34
            settimer jaseowns_WarnMeAtThisDiffWeightTimer 0
        endif
    endif
    
    if insysmsg "Weapon ability ready"
        settimer jaseowns_UseAbility1Timer jaseowns_UseAbilityTimerCD
        settimer jaseowns_UseAbility2Timer jaseowns_UseAbilityTimerCD
        settimer jaseowns_UseAbility3Timer jaseowns_UseAbilityTimerCD
        cooldown "Seeking" 0
        cooldown "Leyline" 0
        cooldown "Soulfire" 0
    endif

    if skill "Parry" >= 80 and mana >= jaseowns_CheckParryCodexMinMana and timer jaseowns_CheckParryCodexTimer >= jaseowns_CheckParryCodexTimerCD and findtype 11889 backpack as jaseowns_ParryCodex
        getlabel jaseowns_ParryCodex jaseowns_ParryCodexDesc

        if "Shield Bash" in jaseowns_ParryCodexDesc
            @setvar! jaseowns_ActiveParryCodex 1
        elseif "Warding" in jaseowns_ParryCodexDesc
            @setvar! jaseowns_ActiveParryCodex 2
        elseif "Testudo" in jaseowns_ParryCodexDesc
            @setvar! jaseowns_ActiveParryCodex 3
        elseif "Mirror" in jaseowns_ParryCodexDesc
            @setvar! jaseowns_ActiveParryCodex 4
        elseif "Bulwark" in jaseowns_ParryCodexDesc
            @setvar! jaseowns_ActiveParryCodex 5
        endif
        
        if findbuff "bleed" and jaseowns_SwitchToWardingIfBleeding = 1
            @setvar! jaseowns_SwitchTo 2
        elseif findbuff "disease" and jaseowns_SwitchToWardingIfDisease = 1
            @setvar! jaseowns_SwitchTo 2
        elseif poisoned and jaseowns_SwitchToWardingIfPoison = 1
            @setvar! jaseowns_SwitchTo 2
        elseif jaseowns_SwitchToBulwarkIfStandingStill = 1 and not cooldown "Bulwark"
            @setvar! jaseowns_SwitchTo 5
        elseif jaseowns_SwitchToShieldBashWhileMoving = 1 and cooldown "Moving"
            @setvar! jaseowns_SwitchTo 1
        elseif jaseowns_SwitchToTestudoWhileMoving = 1 and cooldown "Moving"
            @setvar! jaseowns_SwitchTo 3
        endif
        
        if jaseowns_ActiveParryCodex != jaseowns_SwitchTo
            if jaseowns_SwitchTo = 1
                say "[ShieldsStance1"
            elseif jaseowns_SwitchTo = 2
                say "[ShieldsStance2"
            elseif jaseowns_SwitchTo = 3
                say "[ShieldsStance3"
            elseif jaseowns_SwitchTo = 4
                say "[ShieldsStance4"
            elseif jaseowns_SwitchTo = 5
                say "[ShieldsStance5"
            endif
            settimer jaseowns_CheckParryCodexTimer 0
        endif
        
    endif

    
    ## KEG CHECK (need empty bottles)
    if findtype 3854 self 0

        @setvar! jaseowns_TempOverheadHelper 0
    
        if timer jaseowns_UseItemTimer >= jaseowns_UseItemTimerCD and findtype 3854 self 0 and counttype 3852 self 0 < jaseowns_HealthPotCountInBackpack
            if findtype 6464 self 253 as jaseowns_Keg
                settimer jaseowns_UseItemTimer 0
                dclick jaseowns_Keg
                wait 200
            endif
            if jaseowns_HealPotOverheadAlert = 1 and timer jaseowns_OverheadAlertsAboutPotionsTimer >= jaseowns_OverheadAlertsAboutPotionsTimerCD
                @setvar! jaseowns_TempOverheadHelper 1
                if counttype 3852 self 0 as jaseowns_PotCount
                    overhead "Heal potions: {{jaseowns_PotCount}} / {{jaseowns_HealthPotCountInBackpack}}" 253
                else
                    overhead "Heal potions: 0 / {{jaseowns_HealthPotCountInBackpack}}" 253
                endif
            endif
        endif
        
        if timer jaseowns_UseItemTimer >= jaseowns_UseItemTimerCD and findtype 3854 self 0 and counttype 3847 self 0 < jaseowns_CurePotCountInBackpack
            if findtype 6464 self 44 as jaseowns_Keg
                settimer jaseowns_UseItemTimer 0
                dclick jaseowns_Keg
                wait 200
            endif
            if jaseowns_CurePotOverheadAlert = 1 and timer jaseowns_OverheadAlertsAboutPotionsTimer >= jaseowns_OverheadAlertsAboutPotionsTimerCD
                @setvar! jaseowns_TempOverheadHelper 1
                if counttype 3847 self 0 as jaseowns_PotCount
                    overhead "Cure potions: {{jaseowns_PotCount}} / {{jaseowns_CurePotCountInBackpack}}" 44
                else
                    overhead "Cure potions: 0 / {{jaseowns_CurePotCountInBackpack}}" 44
                endif
            endif
        endif
                
        if timer jaseowns_UseItemTimer >= jaseowns_UseItemTimerCD and findtype 3854 self 0 and counttype 3853 self 0 < jaseowns_ExplosionPotCountInBackpack
            if findtype 6464 self 419 as jaseowns_Keg
                settimer jaseowns_UseItemTimer 0
                dclick jaseowns_Keg
                wait 200
            endif
            if jaseowns_ExplosionPotOverheadAlert = 1 and timer jaseowns_OverheadAlertsAboutPotionsTimer >= jaseowns_OverheadAlertsAboutPotionsTimerCD
                if counttype 3853 self 0 as jaseowns_PotCount
                    @setvar! jaseowns_TempOverheadHelper 1
                    overhead "Explosion potions: {{jaseowns_PotCount}} / {{jaseowns_ExplosionPotCountInBackpack}}" 419
                else
                    overhead "Explosion potions: 0 / {{jaseowns_ExplosionPotCountInBackpack}}" 419
                endif
            endif
        endif

        if timer jaseowns_UseItemTimer >= jaseowns_UseItemTimerCD and findtype 3854 self 0 and counttype 3849 self 0 < jaseowns_StrengthPotCountInBackpack
            if findtype 6464 self 956 as jaseowns_Keg
                settimer jaseowns_UseItemTimer 0
                dclick jaseowns_Keg
                wait 200
            endif
            if jaseowns_StrengthPotOverheadAlert = 1 and timer jaseowns_OverheadAlertsAboutPotionsTimer >= jaseowns_OverheadAlertsAboutPotionsTimerCD
                @setvar! jaseowns_TempOverheadHelper 1
                if counttype 3849 self 0 as jaseowns_PotCount
                    overhead "Strength potions: {{jaseowns_PotCount}} / {{jaseowns_StrengthPotCountInBackpack}}" 956
                else
                    overhead "Strength potions: 0 / {{jaseowns_StrengthPotCountInBackpack}}" 956
                endif
            endif
        endif
        
        if timer jaseowns_UseItemTimer >= jaseowns_UseItemTimerCD and findtype 3854 self 0 and counttype 3846 self 0 < jaseowns_MagicResistPotCountInBackpack
            if findtype 6464 self 1109 as jaseowns_Keg
                settimer jaseowns_UseItemTimer 0
                dclick jaseowns_Keg
                wait 200
            endif
            if jaseowns_MagicResistPotOverheadAlert = 1 and timer jaseowns_OverheadAlertsAboutPotionsTimer >= jaseowns_OverheadAlertsAboutPotionsTimerCD
                @setvar! jaseowns_TempOverheadHelper 1
                if counttype 3846 self 0 as jaseowns_PotCount
                    overhead "Resist potions: {{jaseowns_PotCount}} / {{jaseowns_MagicResistPotCountInBackpack}}" 1109
                else
                    overhead "Resist potions: 0 / {{jaseowns_MagicResistPotCountInBackpack}}" 1109
                endif
            endif
        endif

        if timer jaseowns_UseItemTimer >= jaseowns_UseItemTimerCD and findtype 3854 self 0 and counttype 3851 self 0 < jaseowns_RefreshPotCountInBackpack
            if findtype 6464 self 37 as jaseowns_Keg
                settimer jaseowns_UseItemTimer 0
                dclick jaseowns_Keg
                wait 200
            endif
            if jaseowns_RefreshPotOverheadAlert = 1 and timer jaseowns_OverheadAlertsAboutPotionsTimer >= jaseowns_OverheadAlertsAboutPotionsTimerCD
                @setvar! jaseowns_TempOverheadHelper 1
                if counttype 3851 self 0 as jaseowns_PotCount
                    overhead "Refresh potions: {{jaseowns_PotCount}} / {{jaseowns_RefreshPotCountInBackpack}}" 37
                else
                    overhead "Refresh potions: 0 / {{jaseowns_RefreshPotCountInBackpack}}" 37
                endif
            endif
        endif
        
        if timer jaseowns_UseItemTimer >= jaseowns_UseItemTimerCD and findtype 3854 self 0 and counttype 3848 self 0 < jaseowns_AgilityPotCountInBackpack
            if findtype 6464 self 93 as jaseowns_Keg
                settimer jaseowns_UseItemTimer 0
                dclick jaseowns_Keg
                wait 200
            endif
            if jaseowns_AgilityPotOverheadAlert = 1 and timer jaseowns_OverheadAlertsAboutPotionsTimer >= jaseowns_OverheadAlertsAboutPotionsTimerCD
                @setvar! jaseowns_TempOverheadHelper 1
                if counttype 3848 self 0 as jaseowns_PotCount
                    overhead "Agility potions: {{jaseowns_PotCount}} / {{jaseowns_AgilityPotCountInBackpack}}" 93
                else
                    overhead "Agility potions: 0 / {{jaseowns_AgilityPotCountInBackpack}}" 93
                endif
            endif
        endif
        
        if jaseowns_TempOverheadHelper = 1
            settimer jaseowns_OverheadAlertsAboutPotionsTimer 0
        endif
    elseif jaseowns_NoEmptyBottlesAlert = 1 and timer jaseowns_OverheadAlertsAboutPotionsTimer >= jaseowns_OverheadAlertsAboutPotionsTimerCD
        overhead "No empty bottles, you might be missing potions" 34
        settimer jaseowns_OverheadAlertsAboutPotionsTimer 0
    endif

    if weight >= maxweight and not findbuff "strength" and jaseowns_AutomaticallyDrinkStrPotIfOverWeight = 1 and findtype "white potion" self as jaseowns_Pot
        dclick jaseowns_Pot
        wait 200
    endif

    if followers < jaseowns_CastToMaxFollowers and jaseowns_SUMMONER_MAYBE = 1
        if jaseowns_DEBUG_MODE = 1
            sysmsg "Summon pets!"
        endif
        @setvar! jaseowns_BOT_STATE 15
    endif
    
    # Eat food if we got it
    if not findbuff "food" and findtype "tray" backpack as jaseowns_FoodBuff
        dclick jaseowns_FoodBuff
        getlabel backpack jaseowns_PingCheck
    endif
    
    
    
    # TODO: come back this
    if timer jaseowns_BOT_TARGET_SELECTED_TIMER >= jaseowns_BOT_TARGET_SELECTED_TIMER_CD and not dead jaseowns_BOT_TARGET
        if jaseowns_BOT_STATE = 50
            // do nothing (we medding)
        elseif inlist jaseowns_IGNORE_CREATURES jaseowns_BOT_TARGET
            // do nothing again
        else
            if jaseowns_DEBUG_MODE = 1
                overhead "we have the same target"
            endif
            
#            if warmode
#                @setvar! jaseowns_BOT_STATE 40
#            else
#                @setvar! jaseowns_BOT_STATE 35
#            endif
            
            @setvar! jaseowns_BOT_STATE 30
        endif
        settimer jaseowns_BOT_TARGET_SELECTED_TIMER 0
    endif 

    if not queued and jaseowns_UseSkinningKnifeAutomatically = 1 and findtype 11552 backpack as jaseowns_SkinningKnife
        if findbuff "Actively Meditating"
            //do nothing
        elseif findtype 8198 ground -1 -1 2 as jorpse
            while not targetexists 
                dclick jaseowns_SkinningKnife
                wft 500
            endwhile
            while targetexists 
                hotkey "Target Self"
                getlabel backpack jaseowns_PingCheck
            endwhile
            @ignore jorpse
        endif
    endif
    


    // Handle manual bandage
    while insysmsg "You begin applying" or insysmsg "You begin using veterinary supplies" or insysmsg "You cancel your bandage and begin using veterinary supplies"
        overhead "Bandage was started" 69
        sysmsg "Bandage was started" 69
        settimer jaseowns_BandageTimer 0
    endwhile

    // Reset the timer if we finished
    while insysmsg "You finish applying" or insysmsg "You heal what little" or insysmsg "barely help" or insysmsg "You fail to resurrect" or insysmsg "You are able to resurrect" or insysmsg "You finish using veterinary supplies"
        overhead "Bandage has finished" 69
        sysmsg "Bandage has finished" 69
        settimer jaseowns_BandageTimer jaseowns_BandageTimerCD
    endwhile

    
    if skill "Healing" > 0 and findtype 3617 backpack 
        if timer jaseowns_BandageTimer >= jaseowns_BandageTimerCD and not queued and not targetexists
            if hp < maxhp or poisoned or findbuff "disease" or findbuff "bleed"
                hotkey "Bandage Self"
                getlabel backpack jaseowns_PingCheck
                if insysmsg "You begin applying"
                    overhead "Bandage was started" 69
                    sysmsg "Bandage was started" 69
                    settimer jaseowns_BandageTimer 0
                endif
            endif
        endif
    endif


### Paralyze check

    if jaseowns_UseRedPouchAutomatically = 1 and paralyzed and findtype "pouch" backpack 38 as item
        dclick item
        getlabel backpack jaseowns_PingCheck
    endif
    
    
    
### POTIONS

    if jaseowns_HasPanacea = 1 and timer jaseowns_UsePanaceaTimer >= jaseowns_UsePanaceaTimerCD and not queued
        if findbuff "bleed" or findbuff "disease"
            if findtype 3847 self 0 as jaseowns_UseItem
                if timer jaseowns_UseItemTimer >= jaseowns_UseItemTimerCD
                    dclick jaseowns_UseItem
                    settimer jaseowns_UseItemTimer 0
                    getlabel jaseowns_UseItem desc
                    cooldown "Panacea" jaseowns_UsePanaceaTimerCD
                    settimer jaseowns_UsePanaceaTimer 0
                endif
            endif
        endif
    endif

    if jaseowns_UseCurePotion = 1 and not queued
        if poisoned and diffhits >= jaseowns_UseCurePotionAtHealthDiff and findtype 3847 self 0 as jaseowns_UseItem
            if timer jaseowns_UseItemTimer >= jaseowns_UseItemTimerCD
                dclick jaseowns_UseItem
                getlabel jaseowns_UseItem desc
            endif
        elseif not findtype 3847 self 0
            @setvar! jaseowns_UseCurePotionOnlyInsteadOfCureSpell 0
        endif
    endif

    if jaseowns_UseHealPotion = 1 and timer jaseowns_UseHealPotionTimer >= jaseowns_UseHealPotionTimerCD and not queued
        if diffhits >= jaseowns_UseHealPotionAtHealthDiff and findtype 3852 self 0 as jaseowns_UseItem
            getlabel jaseowns_UseItem desc
            if "next" in desc
                // wait 
            else
                if timer jaseowns_UseItemTimer >= jaseowns_UseItemTimerCD
                    dclick jaseowns_UseItem
                    settimer jaseowns_UseItemTimer 0
                    getlabel jaseowns_UseItem desc
                endif
                if "next" in desc
                    cooldown "Heal Potion" jaseowns_UseHealPotionTimerCD
                    settimer jaseowns_UseHealPotionTimer 0
                endif
            endif
        endif
    endif

    if jaseowns_UseRefreshPotion = 1 and timer jaseowns_UseRefreshPotionTimer >= jaseowns_UseRefreshPotionTimerCD and not queued
        if diffstam >= jaseowns_UseRefreshPotionAtStamDiff and findtype 3851 self 0 as jaseowns_UseItem
            if counttype 3851 self 0 as jaseowns_CurrentPotCountTotal
                @setvar! jaseowns_CurrentPotCount jaseowns_CurrentPotCountTotal
            endif
            if timer jaseowns_UseItemTimer >= jaseowns_UseItemTimerCD
                dclick jaseowns_UseItem
                settimer jaseowns_UseItemTimer 0
                getlabel jaseowns_UseItem desc
            endif
            if counttype 3851 self 0 as jaseowns_CurrentPotCountTotal
                if jaseowns_CurrentPotCountTotal != jaseowns_CurrentPotCount
                    cooldown "Refresh Potion" jaseowns_UseRefreshPotionTimerCD
                    settimer jaseowns_UseRefreshPotionTimer 0            
                endif
            endif
        endif
    endif
    
    if jaseowns_UseStrengthPotion = 1 and findtype 3849 self 0 as jaseowns_UseItem
        if jaseowns_UseStrengthPotionOnlyInWarMode = 1 and not warmode
            // do nothing
        elseif not queued
            if maxhp > jaseowns_DynamicMaxHP
                if maxhp >= 142
                    @setvar! jaseowns_DynamicMaxHP 142
                elseif maxhp = 141
                    @setvar! jaseowns_DynamicMaxHP 141
                elseif maxhp = 140
                    @setvar! jaseowns_DynamicMaxHP 140
                elseif maxhp = 139
                    @setvar! jaseowns_DynamicMaxHP 139
                elseif maxhp = 138
                    @setvar! jaseowns_DynamicMaxHP 138
                elseif maxhp = 137
                    @setvar! jaseowns_DynamicMaxHP 137
                elseif maxhp = 136
                    @setvar! jaseowns_DynamicMaxHP 136
                elseif maxhp = 135
                    @setvar! jaseowns_DynamicMaxHP 135
                elseif maxhp = 134
                    @setvar! jaseowns_DynamicMaxHP 134
                elseif maxhp = 133
                    @setvar! jaseowns_DynamicMaxHP 133
                elseif maxhp = 132
                    @setvar! jaseowns_DynamicMaxHP 132
                elseif maxhp = 131
                    @setvar! jaseowns_DynamicMaxHP 131
                elseif maxhp = 130
                    @setvar! jaseowns_DynamicMaxHP 130
                elseif maxhp = 129
                    @setvar! jaseowns_DynamicMaxHP 129
                elseif maxhp = 128
                    @setvar! jaseowns_DynamicMaxHP 128
                elseif maxhp = 127
                    @setvar! jaseowns_DynamicMaxHP 127
                elseif maxhp = 126
                    @setvar! jaseowns_DynamicMaxHP 126
                elseif maxhp = 125
                    @setvar! jaseowns_DynamicMaxHP 125
                elseif maxhp = 124
                    @setvar! jaseowns_DynamicMaxHP 124
                elseif maxhp = 123
                    @setvar! jaseowns_DynamicMaxHP 123
                elseif maxhp = 122
                    @setvar! jaseowns_DynamicMaxHP 122
                elseif maxhp = 121
                    @setvar! jaseowns_DynamicMaxHP 121
                elseif maxhp = 120
                    @setvar! jaseowns_DynamicMaxHP 120
                elseif maxhp = 119
                    @setvar! jaseowns_DynamicMaxHP 119
                elseif maxhp = 118
                    @setvar! jaseowns_DynamicMaxHP 118
                elseif maxhp = 117
                    @setvar! jaseowns_DynamicMaxHP 117
                elseif maxhp = 116
                    @setvar! jaseowns_DynamicMaxHP 116
                elseif maxhp = 115
                    @setvar! jaseowns_DynamicMaxHP 115
                elseif maxhp = 114
                    @setvar! jaseowns_DynamicMaxHP 114
                elseif maxhp = 113
                    @setvar! jaseowns_DynamicMaxHP 113
                elseif maxhp = 112
                    @setvar! jaseowns_DynamicMaxHP 112
                elseif maxhp = 111
                    @setvar! jaseowns_DynamicMaxHP 111
                elseif maxhp = 110
                    @setvar! jaseowns_DynamicMaxHP 110
                elseif maxhp = 109
                    @setvar! jaseowns_DynamicMaxHP 109
                elseif maxhp = 108
                    @setvar! jaseowns_DynamicMaxHP 108
                elseif maxhp = 107
                    @setvar! jaseowns_DynamicMaxHP 107
                elseif maxhp = 106
                    @setvar! jaseowns_DynamicMaxHP 106
                elseif maxhp = 105
                    @setvar! jaseowns_DynamicMaxHP 105
                elseif maxhp = 104
                    @setvar! jaseowns_DynamicMaxHP 104
                elseif maxhp = 103
                    @setvar! jaseowns_DynamicMaxHP 103
                elseif maxhp = 102
                    @setvar! jaseowns_DynamicMaxHP 102
                elseif maxhp <= 101
                    @setvar! jaseowns_DynamicMaxHP 101
                endif
            endif

            if not findbuff "Strength" or str < jaseowns_DynamicMaxHP
                if timer jaseowns_UseItemTimer >= jaseowns_UseItemTimerCD
                    dclick jaseowns_UseItem
                    settimer jaseowns_UseItemTimer 0
                    getlabel jaseowns_UseItem desc
                endif
                if findbuff "Strength Potion Usage Cooldown"
                    cooldown "Strength Potion" 120000
                endif
            endif    
        endif
    endif

    if jaseowns_UseAgilityPotion = 1 and findtype 3848 self 0 as jaseowns_UseItem
        if jaseowns_UseAgilityPotionOnlyInWarMode = 1 and not warmode
            // do nothing
        elseif not queued
        
            if dex > jaseowns_DynamicMaxAGI
                if dex = 142
                    @setvar! jaseowns_DynamicMaxAGI 142
                elseif dex = 141
                    @setvar! jaseowns_DynamicMaxAGI 141
                elseif dex = 140
                    @setvar! jaseowns_DynamicMaxAGI 140
                elseif dex = 139
                    @setvar! jaseowns_DynamicMaxAGI 139
                elseif dex = 138
                    @setvar! jaseowns_DynamicMaxAGI 138
                elseif dex = 137
                    @setvar! jaseowns_DynamicMaxAGI 137
                elseif dex = 136
                    @setvar! jaseowns_DynamicMaxAGI 136
                elseif dex = 135
                    @setvar! jaseowns_DynamicMaxAGI 135
                elseif dex = 134
                    @setvar! jaseowns_DynamicMaxAGI 134
                elseif dex = 133
                    @setvar! jaseowns_DynamicMaxAGI 133
                elseif dex = 132
                    @setvar! jaseowns_DynamicMaxAGI 132
                elseif dex = 131
                    @setvar! jaseowns_DynamicMaxAGI 131
                elseif dex = 130
                    @setvar! jaseowns_DynamicMaxAGI 130
                elseif dex = 129
                    @setvar! jaseowns_DynamicMaxAGI 129
                elseif dex = 128
                    @setvar! jaseowns_DynamicMaxAGI 128
                elseif dex = 127
                    @setvar! jaseowns_DynamicMaxAGI 127
                elseif dex = 126
                    @setvar! jaseowns_DynamicMaxAGI 126
                elseif dex = 125
                    @setvar! jaseowns_DynamicMaxAGI 125
                elseif dex = 124
                    @setvar! jaseowns_DynamicMaxAGI 124
                elseif dex = 123
                    @setvar! jaseowns_DynamicMaxAGI 123
                elseif dex = 122
                    @setvar! jaseowns_DynamicMaxAGI 122
                elseif dex = 121
                    @setvar! jaseowns_DynamicMaxAGI 121
                elseif dex = 120
                    @setvar! jaseowns_DynamicMaxAGI 120
                elseif dex = 119
                    @setvar! jaseowns_DynamicMaxAGI 119
                elseif dex = 118
                    @setvar! jaseowns_DynamicMaxAGI 118
                elseif dex = 117
                    @setvar! jaseowns_DynamicMaxAGI 117
                elseif dex = 116
                    @setvar! jaseowns_DynamicMaxAGI 116
                elseif dex = 115
                    @setvar! jaseowns_DynamicMaxAGI 115
                elseif dex = 114
                    @setvar! jaseowns_DynamicMaxAGI 114
                elseif dex = 113
                    @setvar! jaseowns_DynamicMaxAGI 113
                elseif dex = 112
                    @setvar! jaseowns_DynamicMaxAGI 112
                elseif dex = 111
                    @setvar! jaseowns_DynamicMaxAGI 111
                elseif dex = 110
                    @setvar! jaseowns_DynamicMaxAGI 110
                elseif dex = 109
                    @setvar! jaseowns_DynamicMaxAGI 109
                elseif dex = 108
                    @setvar! jaseowns_DynamicMaxAGI 108
                elseif dex = 107
                    @setvar! jaseowns_DynamicMaxAGI 107
                elseif dex = 106
                    @setvar! jaseowns_DynamicMaxAGI 106
                elseif dex = 105
                    @setvar! jaseowns_DynamicMaxAGI 105
                elseif dex = 104
                    @setvar! jaseowns_DynamicMaxAGI 104
                elseif dex = 103
                    @setvar! jaseowns_DynamicMaxAGI 103
                elseif dex = 102
                    @setvar! jaseowns_DynamicMaxAGI 102
                elseif dex = 101
                    @setvar! jaseowns_DynamicMaxAGI 101
                elseif dex = 100
                    @setvar! jaseowns_DynamicMaxAGI 100
                elseif dex = 99
                    @setvar! jaseowns_DynamicMaxAGI 99
                elseif dex = 99
                    @setvar! jaseowns_DynamicMaxAGI 99
                elseif dex = 98
                    @setvar! jaseowns_DynamicMaxAGI 98
                elseif dex = 97
                    @setvar! jaseowns_DynamicMaxAGI 97
                elseif dex = 96
                    @setvar! jaseowns_DynamicMaxAGI 96
                elseif dex = 95
                    @setvar! jaseowns_DynamicMaxAGI 95
                elseif dex = 94
                    @setvar! jaseowns_DynamicMaxAGI 94
                elseif dex = 93
                    @setvar! jaseowns_DynamicMaxAGI 93
                elseif dex = 92
                    @setvar! jaseowns_DynamicMaxAGI 92
                elseif dex = 91
                    @setvar! jaseowns_DynamicMaxAGI 91
                elseif dex = 90
                    @setvar! jaseowns_DynamicMaxAGI 90
                elseif dex = 89
                    @setvar! jaseowns_DynamicMaxAGI 89
                elseif dex = 88
                    @setvar! jaseowns_DynamicMaxAGI 88
                elseif dex = 87
                    @setvar! jaseowns_DynamicMaxAGI 87
                elseif dex = 86
                    @setvar! jaseowns_DynamicMaxAGI 86
                elseif dex = 85
                    @setvar! jaseowns_DynamicMaxAGI 85
                elseif dex = 84
                    @setvar! jaseowns_DynamicMaxAGI 84
                elseif dex = 83
                    @setvar! jaseowns_DynamicMaxAGI 83
                elseif dex = 82
                    @setvar! jaseowns_DynamicMaxAGI 82
                elseif dex = 81
                    @setvar! jaseowns_DynamicMaxAGI 81
                elseif dex = 80
                    @setvar! jaseowns_DynamicMaxAGI 80
                elseif dex = 79
                    @setvar! jaseowns_DynamicMaxAGI 79
                elseif dex = 78
                    @setvar! jaseowns_DynamicMaxAGI 78
                elseif dex = 77
                    @setvar! jaseowns_DynamicMaxAGI 77
                elseif dex = 76
                    @setvar! jaseowns_DynamicMaxAGI 76
                elseif dex = 75
                    @setvar! jaseowns_DynamicMaxAGI 75
                elseif dex = 74
                    @setvar! jaseowns_DynamicMaxAGI 74
                elseif dex = 73
                    @setvar! jaseowns_DynamicMaxAGI 73
                elseif dex = 72
                    @setvar! jaseowns_DynamicMaxAGI 72
                elseif dex = 71
                    @setvar! jaseowns_DynamicMaxAGI 71
                elseif dex = 70
                    @setvar! jaseowns_DynamicMaxAGI 70
                elseif dex = 69
                    @setvar! jaseowns_DynamicMaxAGI 69
                elseif dex = 68
                    @setvar! jaseowns_DynamicMaxAGI 68
                elseif dex = 67
                    @setvar! jaseowns_DynamicMaxAGI 67
                elseif dex = 66
                    @setvar! jaseowns_DynamicMaxAGI 66
                elseif dex = 65
                    @setvar! jaseowns_DynamicMaxAGI 65
                elseif dex = 64
                    @setvar! jaseowns_DynamicMaxAGI 64
                elseif dex = 63
                    @setvar! jaseowns_DynamicMaxAGI 63
                elseif dex = 62
                    @setvar! jaseowns_DynamicMaxAGI 62
                elseif dex = 61
                    @setvar! jaseowns_DynamicMaxAGI 61
                elseif dex = 60
                    @setvar! jaseowns_DynamicMaxAGI 60
                elseif dex = 59
                    @setvar! jaseowns_DynamicMaxAGI 59
                elseif dex = 58
                    @setvar! jaseowns_DynamicMaxAGI 58
                elseif dex = 57
                    @setvar! jaseowns_DynamicMaxAGI 57
                elseif dex = 56
                    @setvar! jaseowns_DynamicMaxAGI 56
                elseif dex = 55
                    @setvar! jaseowns_DynamicMaxAGI 55
                elseif dex = 54
                    @setvar! jaseowns_DynamicMaxAGI 54
                elseif dex = 53
                    @setvar! jaseowns_DynamicMaxAGI 53
                elseif dex = 52
                    @setvar! jaseowns_DynamicMaxAGI 52
                elseif dex = 51
                    @setvar! jaseowns_DynamicMaxAGI 51
                elseif dex = 50
                    @setvar! jaseowns_DynamicMaxAGI 50
                elseif dex = 49
                    @setvar! jaseowns_DynamicMaxAGI 49
                elseif dex = 48
                    @setvar! jaseowns_DynamicMaxAGI 48
                elseif dex = 47
                    @setvar! jaseowns_DynamicMaxAGI 47
                elseif dex = 46
                    @setvar! jaseowns_DynamicMaxAGI 46
                elseif dex = 45
                    @setvar! jaseowns_DynamicMaxAGI 45
                elseif dex = 44
                    @setvar! jaseowns_DynamicMaxAGI 44
                elseif dex = 43
                    @setvar! jaseowns_DynamicMaxAGI 43
                elseif dex = 42
                    @setvar! jaseowns_DynamicMaxAGI 42
                elseif dex = 41
                    @setvar! jaseowns_DynamicMaxAGI 41
                elseif dex = 40
                    @setvar! jaseowns_DynamicMaxAGI 40
                elseif dex = 39
                    @setvar! jaseowns_DynamicMaxAGI 39
                elseif dex = 38
                    @setvar! jaseowns_DynamicMaxAGI 38
                elseif dex = 37
                    @setvar! jaseowns_DynamicMaxAGI 37
                elseif dex = 36
                    @setvar! jaseowns_DynamicMaxAGI 36
                elseif dex = 35
                    @setvar! jaseowns_DynamicMaxAGI 35
                elseif dex = 34
                    @setvar! jaseowns_DynamicMaxAGI 34
                elseif dex = 33
                    @setvar! jaseowns_DynamicMaxAGI 33
                elseif dex = 32
                    @setvar! jaseowns_DynamicMaxAGI 32
                elseif dex = 31
                    @setvar! jaseowns_DynamicMaxAGI 31
                elseif dex = 30
                    @setvar! jaseowns_DynamicMaxAGI 30
                elseif dex = 29
                    @setvar! jaseowns_DynamicMaxAGI 29
                elseif dex = 28
                    @setvar! jaseowns_DynamicMaxAGI 28
                elseif dex = 27
                    @setvar! jaseowns_DynamicMaxAGI 27
                elseif dex <= 26
                    @setvar! jaseowns_DynamicMaxAGI 26
                endif
            endif    
        
            if not findbuff "agility" or dex < jaseowns_DynamicMaxAGI
                if timer jaseowns_UseItemTimer >= jaseowns_UseItemTimerCD
                    dclick jaseowns_UseItem
                    settimer jaseowns_UseItemTimer 0
                    getlabel jaseowns_UseItem desc
                endif
                if findbuff "Agility Potion Usage Cooldown" 
                    cooldown "Agility Potion" 120000
                endif
            endif
        endif
    endif
    # jaseowns_Potion_UseMagicResistAgainIfDebuffedAutomatically
    
    if jaseowns_UseMagicResistPotion = 1 and not queued
        if jaseowns_UseMagicResistPotionOnlyInWarMode = 1 and not warmode
            // do nothing
        elseif jaseowns_UseMagicResistPotionOnlyIfMissingMagicReflection = 1 and findbuff "Magic Reflection"
            // do nothing
        elseif not findbuff "Magic Resist Potion" and findtype 3846 self 0 as jaseowns_UseItem
            if timer jaseowns_UseItemTimer >= jaseowns_UseItemTimerCD
                dclick jaseowns_UseItem
                settimer jaseowns_UseItemTimer 0
            endif
        elseif jaseowns_Potion_UseMagicResistAgainIfDebuffedAutomatically = 1 and findbuff "Magic Resist Decrease" and findtype 3846 self as jaseowns_UseItem
            if timer jaseowns_UseItemTimer >= jaseowns_UseItemTimerCD
                dclick jaseowns_UseItem
                settimer jaseowns_UseItemTimer 0
            endif
        endif
    endif

    #####
    ## TARGETING
    ###
    
    if insysmsg "Target a new 'Last Target'"
        overhead "Set your target"
        while insysmsg "Target a new 'Last Target'"
        endwhile
        while targetexists 
            wait 50
        endwhile
    endif

    @setvar! jaseowns_USER_LAST_TARGET lasttarget
    @setvar! jaseowns_USER_LAST_TARGET_FRIENDLY 0

    if inlist jaseowns_IGNORE_CREATURES jaseowns_BOT_TARGET
        if jaseowns_DEBUG_MODE = 1
            sysmsg "Ignoring due to something something" 88
        endif
    
    elseif jaseowns_BOT_TARGET != 0 and jaseowns_USER_LAST_TARGET != jaseowns_BOT_TARGET and find jaseowns_USER_LAST_TARGET ground -1 -1 12 and not dead jaseowns_USER_LAST_TARGET
        if jaseowns_DEBUG_MODE = 1
            sysmsg "{{jaseowns_USER_LAST_TARGET}} {{jaseowns_BOT_TARGET}}"
        endif
        if noto jaseowns_USER_LAST_TARGET = "friend" or noto jaseowns_USER_LAST_TARGET = "innocent" or noto jaseowns_USER_LAST_TARGET = "invulnerable"
            @setvar! jaseowns_USER_LAST_TARGET_FRIENDLY 1
            if jaseowns_DEBUG_MODE = 1
                sysmsg "friendly"
            endif
            @setvar! jaseowns_SKIP_LAST_TARGET jaseowns_USER_LAST_TARGET
            // do nothing
        elseif noto jaseowns_USER_LAST_TARGET = "murderer" or noto jaseowns_USER_LAST_TARGET = "enemy"
            @setvar! jaseowns_SKIP_LAST_TARGET jaseowns_USER_LAST_TARGET
            if jaseowns_DEBUG_MODE = 1
                sysmsg "murderer"
            endif
            // do nothing they are mean players
        elseif noto jaseowns_USER_LAST_TARGET = "hostile" or noto jaseowns_USER_LAST_TARGET = "criminal"
            if jaseowns_DEBUG_MODE = 1
                overhead "We are switching the target"
            endif
            @setvar! jaseowns_BOT_TARGET_PREVIOUS jaseowns_BOT_TARGET
            @setvar! jaseowns_BOT_TARGET lasttarget
            @setvar! jaseowns_BOT_STATE 25
        elseif jaseowns_DEBUG_MODE = 1
            sysmsg "unknown"
        endif
    elseif find jaseowns_USER_LAST_TARGET
       
     #if find jaseowns_USER_LAST_TARGET backpack
#            @setvar! jaseowns_USER_LAST_TARGET 0
#            @setvar! jaseowns_USER_LAST_TARGET_FRIENDLY 1
#        else
        if noto jaseowns_USER_LAST_TARGET = "friend" or noto jaseowns_USER_LAST_TARGET = "innocent" or noto jaseowns_USER_LAST_TARGET = "invulnerable"
            @setvar! jaseowns_USER_LAST_TARGET_FRIENDLY 1
        endif
    endif
    
    removelist jaseowns_SpellCastListHelper
    createlist jaseowns_SpellCastListHelper

    if poisoned and jaseowns_UseCurePotionOnlyInsteadOfCureSpell = 0
        if mana >= jaseowns_CastCureMinMana
            pushlist jaseowns_SpellCastListHelper "Cure" 
        endif
    elseif diffhits >= jaseowns_HitDiffCheckToCastHeal
       // or findbuff "bleed" or findbuff "disease"
        if mana >= jaseowns_CastGreaterHealMinMana
            @setvar! jaseowns_HoldingHealForSomeReason 1
            pushlist jaseowns_SpellCastListHelper "Greater Heal" 
        endif
    else
        @setvar! jaseowns_HoldingHealForSomeReason 0
    endif

    if list jaseowns_SpellCastListHelper = 1
        if casting 
            sysmsg "Interrupting spell cast to heal!" 89
            hotkey "> Interrupt"
            wait 200
        endif
        if targetexists "harmful"
            if jaseowns_DEBUG_MODE = 1
                overhead "Canceling due to harmful during heal"
            endif
            hotkey "Cancel Current Target"
            getlabel backpack jaseowns_PingCheck
        endif
        settimer jaseowns_SpellCastTimerHelper 0
        while not targetexists "beneficial"
            foreach jaseowns_SpellCast in jaseowns_SpellCastListHelper
                cast jaseowns_SpellCast
            endfor
            getlabel backpack jaseowns_PingCheck
            if timer jaseowns_SpellCastTimerHelper >= 3000
                break
            elseif poisoned
                // wait
            elseif diffhits < jaseowns_HitDiffCheckToCastHeal and jaseowns_BreakHealCastIfHealthy = 1 
                hotkey "> Interrupt"
                getlabel backpack jaseowns_PingCheck
                break
            endif
        endwhile
        if diffhits >= jaseowns_HitDiffCheckToCastHeal or poisoned
            if targetexists "beneficial"
                hotkey "Target Self"
            endif
        elseif jaseowns_BreakHealCastIfHealthy = 0
            if targetexists "beneficial"
                hotkey "Target Self"
            endif
        elseif targetexists
            hotkey "Cancel Current Target"
        endif
    endif

    while targetexists and jaseowns_HoldingHealForSomeReason = 0
        sysmsg "Waiting for your target cursor"
        wait 100
        if diffhits >= jaseowns_HitDiffCheckToCastHeal
            hotkey "Cancel current target"
        endif
    endwhile
    
    if jaseowns_UseVetKits = 1 and timer jaseowns_BandageTimer >= jaseowns_BandageTimerCD and findtype 25750 backpack as item
        if hp < maxhp or poisoned or findbuff "disease" or findbuff "bleed" or timer jaseowns_VetKitTimer >= jaseowns_VetKitTimerCD
            @setvar! jaseowns_BOT_UseAKit 1
            if findbuff "Actively Meditating" and diffhits < jaseowns_OkayToCancelMeditateAtHealthCheckDiff
                @setvar! jaseowns_BOT_UseAKit 0
            endif
            if jaseowns_BOT_UseAKit = 1
                dclick item   
                getlabel backpack jaseowns_PingCheck
                if insysmsg "You cancel your bandage and begin using veterinary supplies" or insysmsg "You begin using veterinary supplies."
                    cooldown "Use Vet Supply" jaseowns_VetKitTimerCD
                    settimer jaseowns_VetKitTimer 0
                    settimer jaseowns_BandageTimer 0
                endif
            endif
        endif
    endif
    
    if jaseowns_UseMeditationAutomatically = 1 and not findbuff "Actively Meditating" and diffmana >= jaseowns_UseMeditationAtManaDiff
    
        if timer jaseowns_UseSkillTimer >= jaseowns_UseSkillTimerCD 
            if cooldown "Moving"
                overhead "Stop moving to meditiate"
            else
                if jaseowns_UseVetKits = 1 and timer jaseowns_BandageTimer >= jaseowns_BandageTimerCD and findtype 25750 backpack as item
                    dclick item
                    cooldown "Use Vet Supply" jaseowns_VetKitTimerCD
                    settimer jaseowns_VetKitTimer 0
                    getlabel backpack jaseowns_PingCheck
                endif
                if jaseowns_UseAllGuardBeforeMed = 1 and followers > 0
                    say "all guard" 89
                    getlabel backpack jaseowns_PingCheck
                endif
                useskill "meditation"
                getlabel backpack jaseowns_PingCheck
                settimer jaseowns_UseSkillTimer 0                
            endif
        endif
        if findbuff "Actively Meditating"
            cooldown "Waiting on Meditation" jaseowns_UseMeditationMinimalAmountTimerCD
            settimer jaseowns_UseMeditationMinimalAmountTimer 0
            @setvar! jaseowns_BOT_STATE 50
        endif
    endif
    
    if insysmsg "You may now use another magic mushroom."
       settimer jaseowns_EatShroomiesTimer jaseowns_EatShroomiesTimerCD
    endif
    
    # Eat a mushroom
    if jaseowns_EatShroomies = 1 and not queued and not findbuff "Actively Meditating" and timer jaseowns_EatShroomiesTimer >= jaseowns_EatShroomiesTimerCD and diffmana >= jaseowns_EatShroomiesAtDiffMana and findtype 29012 backpack 2963 as item
        while insysmsg "You are already at your maximum mana." or insysmsg "You consume a magic mushroom and restore some mana."
        endwhile 
        dclick item
        getlabel backpack jaseowns_PingCheck
        if insysmsg "You are already at your maximum mana."
            // do nothing
        elseif insysmsg "You consume a magic mushroom and restore some mana."
            settimer jaseowns_EatShroomiesTimer 0
        else
            getlabel backpack jaseowns_PingCheck
            if insysmsg "You consume a magic mushroom and restore some mana."
                settimer jaseowns_EatShroomiesTimer 0
            else
                settimer jaseowns_EatShroomiesTimer 55000
            endif
        endif
    elseif skill "Cooking" > 0 and diffmana >= jaseowns_EatSnackAtDiffMana and findtype "tray|cut%s% of ribs" backpack as jaseowns_Item
        if timer jaseowns_EatSnackTimer >= jaseowns_EatSnackTimerCD
            dclick jaseowns_Item
            settimer jaseowns_EatSnackTimer 0
        endif
    endif
    
    
    #####
    ##  50 : Med Break
    ##  45 : Necro spells
    ##  40 : Spell Casting
    ##  35 : Bard abilities
    ##  30 : All Kill jaseowns_BOT_TARGET
    ##  25 : Arms Lore Sight Check
    ##  20 : Warmode : Scan for target (Target Closest Grey Monster)
    ##  20 : Peace : all follow me
    ##  15 : Peace / War : Summon Followers
    ##  11 : Create Mushrooms
    ##  10 : Warmode : Guard jaseowns_MyMainTamerPet
    ##  10 : Peace : nothing
    ##  999 : nothing
    ####
    
    if skill "Arcane" >= 50 and not gumpexists 3954121934
        say "[abilitieshotbar"
        waitforgump 3954121934 1000
    endif

#    if not gumpexists 2016719803
#        say "[codexhotbar"
#        waitforgump 2016719803 1000
#    endif
    
    
    ###
    #  Manage Bard State
    ###
    if jaseowns_BOT_BARD_STATE = 1
        if jaseowns_BOT_STATE = 40
            if jaseowns_BOT_BARD_PEACED = 0 or jaseowns_BOT_BARD_DISCORDED = 0
                @setvar! jaseowns_BOT_STATE 35
            endif
        endif
    endif
    
    if jaseowns_BOT_STATE = 50
        // meditation break
        if timer jaseowns_UseMeditationMinimalAmountTimer >= jaseowns_UseMeditationMinimalAmountTimerCD
            @setvar! jaseowns_BOT_STATE 40
        elseif not findbuff "Actively Meditating"
            @setvar! jaseowns_BOT_STATE 40
        endif
    elseif jaseowns_BOT_STATE = 40
        if find jaseowns_ArcaneStaffWeapon backpack
            dclick jaseowns_ArcaneStaffWeapon
            wait 650
        endif    
        if cooldown "Moving" > jaseowns_AvoidCastingWhileMovingCD and jaseowns_AvoidCastingWhileMovingCD != 0
            if jaseowns_DEBUG_MODE = 1
                sysmsg "Stop moving to cast" 89
            endif
        elseif casting 
            sysmsg "Already casting..." 89
        elseif jaseowns_BOT_SELF = jaseowns_BOT_TARGET
            @setvar! jaseowns_SKIP_LAST_TARGET self
            if jaseowns_DEBUG_MODE = 1
                overhead "SPELLS: dont attack urself bro" 34    
            endif
            @setvar! jaseowns_BOT_STATE 10
        elseif jaseowns_USER_LAST_TARGET_FRIENDLY = 1
            // skip processing a friendly
            if jaseowns_DEBUG_MODE = 1
                sysmsg "skip processing a friendly"
            endif
        elseif not warmode 
           @setvar! jaseowns_BOT_STATE 20
        elseif dead jaseowns_BOT_TARGET
           @setvar! jaseowns_BOT_STATE 10
        elseif jaseowns_HoldingHealForSomeReason = 0
            
            // necro mancy
            if skill "Necromancy" >= 50
                if not gumpexists 622436516
                    say '[NecromancyHotbar'
                    waitforgump 622436516 500
                endif
                if gumpexists 622436516
                    if cooldown PVP
                        @setvar! necroSymbols 0
                    elseif ingump "15/" 622436516
                        @setvar! necroSymbols 15
                        if jaseowns_Necro_ReserveSymbols = 15
                            @setvar! necroSymbols 0
                        elseif jaseowns_Necro_ReserveSymbols = 14
                            @setvar! necroSymbols 1
                        elseif jaseowns_Necro_ReserveSymbols = 13
                            @setvar! necroSymbols 2
                        elseif jaseowns_Necro_ReserveSymbols = 12
                            @setvar! necroSymbols 3
                        elseif jaseowns_Necro_ReserveSymbols = 11
                            @setvar! necroSymbols 4
                        elseif jaseowns_Necro_ReserveSymbols = 10
                            @setvar! necroSymbols 5
                        elseif jaseowns_Necro_ReserveSymbols = 9
                            @setvar! necroSymbols 6
                        elseif jaseowns_Necro_ReserveSymbols = 8
                            @setvar! necroSymbols 7
                        elseif jaseowns_Necro_ReserveSymbols = 7
                            @setvar! necroSymbols 8
                        elseif jaseowns_Necro_ReserveSymbols = 6
                            @setvar! necroSymbols 9
                        elseif jaseowns_Necro_ReserveSymbols = 5
                            @setvar! necroSymbols 10
                        elseif jaseowns_Necro_ReserveSymbols = 4
                            @setvar! necroSymbols 11
                        elseif jaseowns_Necro_ReserveSymbols = 3
                            @setvar! necroSymbols 12
                        elseif jaseowns_Necro_ReserveSymbols = 2
                            @setvar! necroSymbols 13
                        elseif jaseowns_Necro_ReserveSymbols = 1
                            @setvar! necroSymbols 14
                        elseif jaseowns_Necro_ReserveSymbols = 0
                            @setvar! necroSymbols 15
                        else
                            @setvar! necroSymbols 0
                        endif
                    elseif ingump "14/" 622436516
                        @setvar! necroSymbols 14
                        if jaseowns_Necro_ReserveSymbols = 14
                            @setvar! necroSymbols 0
                        elseif jaseowns_Necro_ReserveSymbols = 13
                            @setvar! necroSymbols 1
                        elseif jaseowns_Necro_ReserveSymbols = 12
                            @setvar! necroSymbols 2
                        elseif jaseowns_Necro_ReserveSymbols = 11
                            @setvar! necroSymbols 3
                        elseif jaseowns_Necro_ReserveSymbols = 10
                            @setvar! necroSymbols 4
                        elseif jaseowns_Necro_ReserveSymbols = 9
                            @setvar! necroSymbols 5
                        elseif jaseowns_Necro_ReserveSymbols = 8
                            @setvar! necroSymbols 6
                        elseif jaseowns_Necro_ReserveSymbols = 7
                            @setvar! necroSymbols 7
                        elseif jaseowns_Necro_ReserveSymbols = 6
                            @setvar! necroSymbols 8
                        elseif jaseowns_Necro_ReserveSymbols = 5
                            @setvar! necroSymbols 9
                        elseif jaseowns_Necro_ReserveSymbols = 4
                            @setvar! necroSymbols 10
                        elseif jaseowns_Necro_ReserveSymbols = 3
                            @setvar! necroSymbols 11
                        elseif jaseowns_Necro_ReserveSymbols = 2
                            @setvar! necroSymbols 12
                        elseif jaseowns_Necro_ReserveSymbols = 1
                            @setvar! necroSymbols 13
                        elseif jaseowns_Necro_ReserveSymbols = 0
                            @setvar! necroSymbols 14
                        else
                            @setvar! necroSymbols 0
                        endif
                    elseif ingump "13/" 622436516
                        @setvar! necroSymbols 13
                        if jaseowns_Necro_ReserveSymbols = 13
                            @setvar! necroSymbols 0
                        elseif jaseowns_Necro_ReserveSymbols = 12
                            @setvar! necroSymbols 1
                        elseif jaseowns_Necro_ReserveSymbols = 11
                            @setvar! necroSymbols 2
                        elseif jaseowns_Necro_ReserveSymbols = 10
                            @setvar! necroSymbols 3
                        elseif jaseowns_Necro_ReserveSymbols = 9
                            @setvar! necroSymbols 4
                        elseif jaseowns_Necro_ReserveSymbols = 8
                            @setvar! necroSymbols 5
                        elseif jaseowns_Necro_ReserveSymbols = 7
                            @setvar! necroSymbols 6
                        elseif jaseowns_Necro_ReserveSymbols = 6
                            @setvar! necroSymbols 7
                        elseif jaseowns_Necro_ReserveSymbols = 5
                            @setvar! necroSymbols 8
                        elseif jaseowns_Necro_ReserveSymbols = 4
                            @setvar! necroSymbols 9
                        elseif jaseowns_Necro_ReserveSymbols = 3
                            @setvar! necroSymbols 10
                        elseif jaseowns_Necro_ReserveSymbols = 2
                            @setvar! necroSymbols 11
                        elseif jaseowns_Necro_ReserveSymbols = 1
                            @setvar! necroSymbols 12
                        elseif jaseowns_Necro_ReserveSymbols = 0
                            @setvar! necroSymbols 13
                        else
                            @setvar! necroSymbols 0
                        endif
                    elseif ingump "12/" 622436516
                        @setvar! necroSymbols 12
                        if jaseowns_Necro_ReserveSymbols = 12
                            @setvar! necroSymbols 0
                        elseif jaseowns_Necro_ReserveSymbols = 11
                            @setvar! necroSymbols 1
                        elseif jaseowns_Necro_ReserveSymbols = 10
                            @setvar! necroSymbols 2
                        elseif jaseowns_Necro_ReserveSymbols = 9
                            @setvar! necroSymbols 3
                        elseif jaseowns_Necro_ReserveSymbols = 8
                            @setvar! necroSymbols 4
                        elseif jaseowns_Necro_ReserveSymbols = 7
                            @setvar! necroSymbols 5
                        elseif jaseowns_Necro_ReserveSymbols = 6
                            @setvar! necroSymbols 6
                        elseif jaseowns_Necro_ReserveSymbols = 5
                            @setvar! necroSymbols 7
                        elseif jaseowns_Necro_ReserveSymbols = 4
                            @setvar! necroSymbols 8
                        elseif jaseowns_Necro_ReserveSymbols = 3
                            @setvar! necroSymbols 9
                        elseif jaseowns_Necro_ReserveSymbols = 2
                            @setvar! necroSymbols 10
                        elseif jaseowns_Necro_ReserveSymbols = 1
                            @setvar! necroSymbols 11
                        elseif jaseowns_Necro_ReserveSymbols = 0
                            @setvar! necroSymbols 12
                        else
                            @setvar! necroSymbols 0
                        endif
                    elseif ingump "11/" 622436516
                        @setvar! necroSymbols 11
                        if jaseowns_Necro_ReserveSymbols = 11
                            @setvar! necroSymbols 0
                        elseif jaseowns_Necro_ReserveSymbols = 10
                            @setvar! necroSymbols 1
                        elseif jaseowns_Necro_ReserveSymbols = 9
                            @setvar! necroSymbols 2
                        elseif jaseowns_Necro_ReserveSymbols = 8
                            @setvar! necroSymbols 3
                        elseif jaseowns_Necro_ReserveSymbols = 7
                            @setvar! necroSymbols 4
                        elseif jaseowns_Necro_ReserveSymbols = 6
                            @setvar! necroSymbols 5
                        elseif jaseowns_Necro_ReserveSymbols = 5
                            @setvar! necroSymbols 6
                        elseif jaseowns_Necro_ReserveSymbols = 4
                            @setvar! necroSymbols 7
                        elseif jaseowns_Necro_ReserveSymbols = 3
                            @setvar! necroSymbols 8
                        elseif jaseowns_Necro_ReserveSymbols = 2
                            @setvar! necroSymbols 9
                        elseif jaseowns_Necro_ReserveSymbols = 1
                            @setvar! necroSymbols 10
                        elseif jaseowns_Necro_ReserveSymbols = 0
                            @setvar! necroSymbols 11
                        else
                            @setvar! necroSymbols 0
                        endif
                    elseif ingump "10/" 622436516
                        @setvar! necroSymbols 10
                        if jaseowns_Necro_ReserveSymbols = 10
                            @setvar! necroSymbols 0
                            @setvar! necroSymbols_HasEnoughForHeal 1
                        elseif jaseowns_Necro_ReserveSymbols = 9
                            @setvar! necroSymbols 1
                        elseif jaseowns_Necro_ReserveSymbols = 8
                            @setvar! necroSymbols 2
                        elseif jaseowns_Necro_ReserveSymbols = 7
                            @setvar! necroSymbols 3
                        elseif jaseowns_Necro_ReserveSymbols = 6
                            @setvar! necroSymbols 4
                        elseif jaseowns_Necro_ReserveSymbols = 5
                            @setvar! necroSymbols 5
                        elseif jaseowns_Necro_ReserveSymbols = 4
                            @setvar! necroSymbols 6
                        elseif jaseowns_Necro_ReserveSymbols = 3
                            @setvar! necroSymbols 7
                        elseif jaseowns_Necro_ReserveSymbols = 2
                            @setvar! necroSymbols 8
                        elseif jaseowns_Necro_ReserveSymbols = 1
                            @setvar! necroSymbols 9
                        elseif jaseowns_Necro_ReserveSymbols = 0
                            @setvar! necroSymbols 10
                        else
                            @setvar! necroSymbols 0
                        endif
                    elseif ingump "9/" 622436516
                        @setvar! necroSymbols 9
                        if jaseowns_Necro_ReserveSymbols = 9
                            @setvar! necroSymbols 0
                        elseif jaseowns_Necro_ReserveSymbols = 8
                            @setvar! necroSymbols 1
                        elseif jaseowns_Necro_ReserveSymbols = 7
                            @setvar! necroSymbols 2
                        elseif jaseowns_Necro_ReserveSymbols = 6
                            @setvar! necroSymbols 3
                        elseif jaseowns_Necro_ReserveSymbols = 5
                            @setvar! necroSymbols 4
                        elseif jaseowns_Necro_ReserveSymbols = 4
                            @setvar! necroSymbols 5
                        elseif jaseowns_Necro_ReserveSymbols = 3
                            @setvar! necroSymbols 6
                        elseif jaseowns_Necro_ReserveSymbols = 2
                            @setvar! necroSymbols 7
                        elseif jaseowns_Necro_ReserveSymbols = 1
                            @setvar! necroSymbols 8
                        elseif jaseowns_Necro_ReserveSymbols = 0
                            @setvar! necroSymbols 9
                        else
                            @setvar! necroSymbols 0
                        endif
                    elseif ingump "8/" 622436516
                        @setvar! necroSymbols 8
                        if jaseowns_Necro_ReserveSymbols = 8
                            @setvar! necroSymbols 0
                        elseif jaseowns_Necro_ReserveSymbols = 7
                            @setvar! necroSymbols 1
                        elseif jaseowns_Necro_ReserveSymbols = 6
                            @setvar! necroSymbols 2
                        elseif jaseowns_Necro_ReserveSymbols = 5
                            @setvar! necroSymbols 3
                        elseif jaseowns_Necro_ReserveSymbols = 4
                            @setvar! necroSymbols 4
                        elseif jaseowns_Necro_ReserveSymbols = 3
                            @setvar! necroSymbols 5
                        elseif jaseowns_Necro_ReserveSymbols = 2
                            @setvar! necroSymbols 6
                        elseif jaseowns_Necro_ReserveSymbols = 1
                            @setvar! necroSymbols 7
                        elseif jaseowns_Necro_ReserveSymbols = 0
                            @setvar! necroSymbols 8
                        else
                            @setvar! necroSymbols 0
                        endif
                    elseif ingump "7/" 622436516
                        @setvar! necroSymbols 7
                        if jaseowns_Necro_ReserveSymbols = 7
                            @setvar! necroSymbols 0
                        elseif jaseowns_Necro_ReserveSymbols = 6
                            @setvar! necroSymbols 1
                        elseif jaseowns_Necro_ReserveSymbols = 5
                            @setvar! necroSymbols 2
                        elseif jaseowns_Necro_ReserveSymbols = 4
                            @setvar! necroSymbols 3
                        elseif jaseowns_Necro_ReserveSymbols = 3
                            @setvar! necroSymbols 4
                        elseif jaseowns_Necro_ReserveSymbols = 2
                            @setvar! necroSymbols 5
                        elseif jaseowns_Necro_ReserveSymbols = 1
                            @setvar! necroSymbols 6
                        elseif jaseowns_Necro_ReserveSymbols = 0
                            @setvar! necroSymbols 7
                        else
                            @setvar! necroSymbols 0
                        endif
                    elseif ingump "6/" 622436516
                        @setvar! necroSymbols 6
                        if jaseowns_Necro_ReserveSymbols = 6
                            @setvar! necroSymbols 0
                        elseif jaseowns_Necro_ReserveSymbols = 5
                            @setvar! necroSymbols 1
                        elseif jaseowns_Necro_ReserveSymbols = 4
                            @setvar! necroSymbols 2
                        elseif jaseowns_Necro_ReserveSymbols = 3
                            @setvar! necroSymbols 3
                        elseif jaseowns_Necro_ReserveSymbols = 2
                            @setvar! necroSymbols 4
                        elseif jaseowns_Necro_ReserveSymbols = 1
                            @setvar! necroSymbols 5
                        elseif jaseowns_Necro_ReserveSymbols = 0
                            @setvar! necroSymbols 6
                        else
                            @setvar! necroSymbols 0
                        endif
                    elseif ingump "5/" 622436516
                        @setvar! necroSymbols 5
                        if jaseowns_Necro_ReserveSymbols = 5
                            @setvar! necroSymbols 0
                        elseif jaseowns_Necro_ReserveSymbols = 4
                            @setvar! necroSymbols 1
                        elseif jaseowns_Necro_ReserveSymbols = 3
                            @setvar! necroSymbols 2
                        elseif jaseowns_Necro_ReserveSymbols = 2
                            @setvar! necroSymbols 3
                        elseif jaseowns_Necro_ReserveSymbols = 1
                            @setvar! necroSymbols 4
                        elseif jaseowns_Necro_ReserveSymbols = 0
                            @setvar! necroSymbols 5
                        else
                            @setvar! necroSymbols 0
                        endif
                    elseif ingump "4/" 622436516
                        @setvar! necroSymbols 4
                        @setvar! necroSymbols_HasEnoughFor_NobleSacrificeHeal 1
                        if jaseowns_Necro_ReserveSymbols = 4
                            @setvar! necroSymbols 0
                        elseif jaseowns_Necro_ReserveSymbols = 3
                            @setvar! necroSymbols 1
                        elseif jaseowns_Necro_ReserveSymbols = 2
                            @setvar! necroSymbols 2
                        elseif jaseowns_Necro_ReserveSymbols = 1
                            @setvar! necroSymbols 3
                        elseif jaseowns_Necro_ReserveSymbols = 0
                            @setvar! necroSymbols 4
                        else
                            @setvar! necroSymbols 0
                        endif
                    elseif ingump "3/" 622436516
                        @setvar! necroSymbols 3
                        if jaseowns_Necro_ReserveSymbols = 3
                            @setvar! necroSymbols 0
                        elseif jaseowns_Necro_ReserveSymbols = 2
                            @setvar! necroSymbols 1
                        elseif jaseowns_Necro_ReserveSymbols = 1
                            @setvar! necroSymbols 2
                        elseif jaseowns_Necro_ReserveSymbols = 0
                            @setvar! necroSymbols 3
                        else
                            @setvar! necroSymbols 0
                        endif
                    elseif ingump "2/" 622436516
                        @setvar! necroSymbols 2
                        if jaseowns_Necro_ReserveSymbols = 2
                            @setvar! necroSymbols 0
                        elseif jaseowns_Necro_ReserveSymbols = 1
                            @setvar! necroSymbols 1
                        elseif jaseowns_Necro_ReserveSymbols = 0
                            @setvar! necroSymbols 2
                        else
                            @setvar! necroSymbols 0
                        endif
                    elseif ingump "1/" 622436516
                        @setvar! necroSymbols 1
                        if jaseowns_Necro_ReserveSymbols = 1
                            @setvar! necroSymbols 0
                        elseif jaseowns_Necro_ReserveSymbols = 0
                            @setvar! necroSymbols 1
                        else
                            @setvar! necroSymbols 0
                        endif
                    elseif ingump "0/" 622436516
                        @setvar! necroSymbols 0
                    endif
                endif
                    
                while insysmsg "Unholy symbols remaining"
                endwhile
                
                if jaseowns_CastCorpseSkin = 1 and jaseowns_CastMindRot = 1 and mana >= jaseowns_CastCorpseSkinAndMindRotAtTheSameTimeMinMana
                    if timer jaseowns_CorpseSkinTimer >= jaseowns_CorpseSkinTimerCD and skill "Necromancy" >= 65 and timer jaseowns_MindRotTimer >= jaseowns_MindRotTimerCD and skill "Necromancy" >= 75 and 5 < necroSymbols
                        if jaseowns_ShowUsedNecroAbilityOverhead = 1
                            overhead "Casting BOTH corpse skin and mind rot"
                        endif
                        while timer jaseowns_UsedNecroAbilityTimer < jaseowns_UsedNecroAbilityTimerCD
                        endwhile
                        gumpresponse 13 622436516
                        getlabel backpack jaseowns_PingCheck
                        if insysmsg "Unholy symbols remaining"
                            settimer jaseowns_CorpseSkinTimer 0
                            settimer jaseowns_UsedNecroAbilityTimer 0
                            cooldown CorpseSkin jaseowns_CorpseSkinTimerCD
                        endif
                        while timer jaseowns_UsedNecroAbilityTimer < jaseowns_UsedNecroAbilityTimerCD
                        endwhile
                        gumpresponse 15 622436516
                        getlabel backpack jaseowns_PingCheck
                        if insysmsg "Unholy symbols remaining"
                            settimer jaseowns_MindRotTimer 0
                            settimer jaseowns_UsedNecroAbilityTimer 0
                            cooldown MindRot jaseowns_MindRotTimerCD
                        endif
                    endif
                endif
                
                ## add necro shit here
                if jaseowns_CastPoison = 1 and jaseowns_CastPoisonStrike = 1 and timer jaseowns_PoisonStrikeTimer >= jaseowns_PoisonStrikeTimerCD and skill "Necromancy" >= 55 and 1 < necroSymbols and timer jaseowns_UsedNecroAbilityTimer >= jaseowns_UsedNecroAbilityTimerCD
                    
                    for 3
                        if dead jaseowns_BOT_TARGET
                            break
                        endif
                        getlabel jaseowns_BOT_TARGET jaseowns_PoisonCheck
                        if "-" in jaseowns_PoisonCheck
                            // do nothing - try again
                        else
                            break
                        endif
                    endfor

                    if "Ticks" in jaseowns_PoisonCheck
                        #if "[11 " in jaseowns_PoisonCheck or "[10 " in jaseowns_PoisonCheck or "[9 " in jaseowns_PoisonCheck or "[8 " in jaseowns_PoisonCheck or "[7 " in jaseowns_PoisonCheck or "[6 " in jaseowns_PoisonCheck  or "[5 " in jaseowns_PoisonCheck  or "[4 " in jaseowns_PoisonCheck
                        if "[7 " in jaseowns_PoisonCheck or "[6 " in jaseowns_PoisonCheck  or "[5 " in jaseowns_PoisonCheck  or "[4 " in jaseowns_PoisonCheck
                            @setvar! jaseowns_FirePoisonCheck 1
                            if jaseowns_CastPoisonStrikeOnlyWhenLethal = 1 
                                if "Lethal" in jaseowns_PoisonCheck
                                 // do nothing
                                else
                                    @setvar! jaseowns_FirePoisonCheck 0
                                endif
                            endif
                            if jaseowns_FirePoisonCheck = 1
                                if jaseowns_ShowUsedNecroAbilityOverhead = 1
                                    overhead "Casting Poison strike"
                                endif
                                while insysmsg "Unholy symbols remaining" or insysmsg "Target cannot be seen" or insysmsg "That is too far away."
                                endwhile
                                gumpresponse 11 622436516
                                wft 500
                                if targetexists 
                                    target jaseowns_BOT_TARGET
                                    getlabel backpack jaseowns_PingCheck
                                    if not targetexists 
                                        if insysmsg "Target cannot be seen" or insysmsg "That is too far away."
                                            if find jaseowns_BOT_TARGET
                                                overhead " < Not able to target > " 34 jaseowns_BOT_TARGET
                                            else
                                                overhead " < Not able to target > " 34
                                            endif
                                        elseif insysmsg "Unholy symbols remaining"
                                            settimer jaseowns_PoisonStrikeTimer 0
                                            settimer jaseowns_UsedNecroAbilityTimer 0
                                            cooldown "Poison Strike" 30000
                                        endif
                                    endif
                                endif
                            endif
                        endif
                    else
                        clearlist jaseowns_CastedPoisonList
                    endif
                endif
                

                
                

                
                # TODO: make sure we are casting this at the right time
                if jaseowns_CastEvilOmen = 1 and timer jaseowns_EvilOmenTimer >= jaseowns_EvilOmenTimerCD and skill "Necromancy" >= 60 and 2 < necroSymbols and timer jaseowns_UsedNecroAbilityTimer >= jaseowns_UsedNecroAbilityTimerCD
                    if jaseowns_ShowUsedNecroAbilityOverhead = 1
                        overhead "Cast Evil Omen"
                    endif
                    gumpresponse 12 622436516
                    getlabel backpack jaseowns_PingCheck
                    if insysmsg "Unholy symbols remaining"
                        settimer jaseowns_EvilOmenTimer 0
                        settimer jaseowns_UsedNecroAbilityTimer 0
                        cooldown EvilOmen jaseowns_EvilOmenTimerCD
                    endif
                elseif jaseowns_CastVampiricEmbrace = 1 and timer jaseowns_VampiricEmbraceTimer >= jaseowns_VampiricEmbraceTimerCD and skill "Necromancy" >= 70 and 3 < necroSymbols and timer jaseowns_UsedNecroAbilityTimer >= jaseowns_UsedNecroAbilityTimerCD and findtype 8198 ground -1 -1 8 as jorpse
                    while insysmsg "You do not see any corpses near that location" or insysmsg "None of your followers currently require healing"
                    endwhile
                    if jaseowns_ShowUsedNecroAbilityOverhead = 1
                        overhead "Cast Vampiric Embrace"
                    endif
                    gumpresponse 14 622436516
                    wft 500
                    if targetexists 
                        hotkey "Target Self"
                        getlabel backpack jaseowns_PingCheck
                        if not targetexists 
                            if insysmsg "Unholy symbols remaining"
                                settimer jaseowns_VampiricEmbraceTimer 0
                                settimer jaseowns_UsedNecroAbilityTimer 0
                                cooldown VampiricEmbrace jaseowns_VampiricEmbraceTimerCD
                            elseif insysmsg "You do not see any corpses near that location"
                                settimer jaseowns_VampiricEmbraceTimer 25000
                                settimer jaseowns_UsedNecroAbilityTimer 0
                                cooldown VampiricEmbrace 5000
                            elseif insysmsg "None of your followers currently require healing"
                                settimer jaseowns_VampiricEmbraceTimer 25000
                                settimer jaseowns_UsedNecroAbilityTimer 0
                                cooldown VampiricEmbrace 5000
                            endif
                        endif
                    endif
                elseif jaseowns_CastCorpseSkin = 1 and jaseowns_CastMindRot = 0 and timer jaseowns_CorpseSkinTimer >= jaseowns_CorpseSkinTimerCD and skill "Necromancy" >= 65 and 2 < necroSymbols and timer jaseowns_UsedNecroAbilityTimer >= jaseowns_UsedNecroAbilityTimerCD
                    if jaseowns_ShowUsedNecroAbilityOverhead = 1
                        overhead "Cast Corpse Skin"
                    endif
                    gumpresponse 13 622436516
                    getlabel backpack jaseowns_PingCheck
                    if insysmsg "Unholy symbols remaining"
                        settimer jaseowns_CorpseSkinTimer 0
                        settimer jaseowns_UsedNecroAbilityTimer 0
                        cooldown CorpseSkin jaseowns_CorpseSkinTimerCD
                    endif
                elseif jaseowns_CastMindRot = 1 and jaseowns_CastCorpseSkin = 0 timer jaseowns_MindRotTimer >= jaseowns_MindRotTimerCD and skill "Necromancy" >= 75 and 3 < necroSymbols and timer jaseowns_UsedNecroAbilityTimer >= jaseowns_UsedNecroAbilityTimerCD
                    if jaseowns_ShowUsedNecroAbilityOverhead = 1
                        overhead "Cast Mind Rot"
                    endif    
                    gumpresponse 15 622436516
                    getlabel backpack jaseowns_PingCheck
                    if insysmsg "Unholy symbols remaining"
                        settimer jaseowns_MindRotTimer 0
                        settimer jaseowns_UsedNecroAbilityTimer 0
                        cooldown MindRot jaseowns_MindRotTimerCD
                    endif
                elseif jaseowns_CastBloodOath = 1 and timer jaseowns_BloodOathTimer >= jaseowns_BloodOathTimerCD and skill "Necromancy" >= 80 and 4 < necroSymbols and timer jaseowns_UsedNecroAbilityTimer >= jaseowns_UsedNecroAbilityTimerCD and followers > 0
                    if jaseowns_ShowUsedNecroAbilityOverhead = 1
                        overhead "Cast Blood Oath"
                    endif
                    gumpresponse 16 622436516
                    getlabel backpack jaseowns_PingCheck
                    if insysmsg "Unholy symbols remaining"
                        settimer jaseowns_BloodOathTimer 0
                        settimer jaseowns_UsedNecroAbilityTimer 0
                        cooldown BloodOath jaseowns_BloodOathTimerCD
                    endif
                elseif jaseowns_CastStrangle = 1 and timer jaseowns_StrangleTimer >= jaseowns_StrangleTimerCD and skill "Necromancy" >= 85 and 4 < necroSymbols and timer jaseowns_UsedNecroAbilityTimer >= jaseowns_UsedNecroAbilityTimerCD
                    if jaseowns_ShowUsedNecroAbilityOverhead = 1
                        overhead "Cast Strangle"
                    endif
                    gumpresponse 17 622436516
                    getlabel backpack jaseowns_PingCheck
                    if insysmsg "Unholy symbols remaining"
                        settimer jaseowns_StrangleTimer 0
                        settimer jaseowns_UsedNecroAbilityTimer 0
                        cooldown Strangle jaseowns_StrangleTimerCD
                    endif
                endif
                
                if not timerexists jaseowns_WeCastedSuccessfullyTimer
                    # overhead "We have not casted yet - wait for extra spells"
                elseif timer jaseowns_WeCastedSuccessfullyTimer >= jaseowns_WeCastedSuccessfullyTimerCD
                    
                    if timer jaseowns_CorpseSkinTimer < jaseowns_CorpseSkinTimerCD and jaseowns_CastPoisonStrikeAfterSuccessfulDisease = 1 and timer jaseowns_PoisonStrikeTimer >= jaseowns_PoisonStrikeTimerCD and gumpexists 622436516 and skill "Poisoning" < 80
                        if jaseowns_ShowUsedNecroAbilityOverhead = 1
                            overhead "Cast Poison strike"
                        endif
                        gumpresponse 11 622436516
                        wft 500
                        if targetexists 
                            while insysmsg "Unholy symbols remaining" or insysmsg "Target cannot be seen" or insysmsg "That is too far away."
                            endwhile
                            target jaseowns_BOT_TARGET
                            getlabel backpack jaseowns_PingCheck
                            if not targetexists 
                                if insysmsg "Target cannot be seen" or insysmsg "That is too far away."
                                    if find jaseowns_BOT_TARGET
                                        overhead " < Not able to target > " 34 jaseowns_BOT_TARGET
                                    else
                                        overhead " < Not able to target > " 34
                                    endif
                                elseif insysmsg "Unholy symbols remaining"
                                    settimer jaseowns_PoisonStrikeTimer 0
                                    settimer jaseowns_UsedNecroAbilityTimer 0
                                    cooldown "Poison Strike" 30000
                                endif
                            endif
                        endif
                    elseif jaseowns_CastPainSpike = 1 and timer jaseowns_PainSpikeTimer >= jaseowns_PainSpikeTimerCD and skill "Necromancy" >= 95 and 5 < necroSymbols and timer jaseowns_UsedNecroAbilityTimer >= jaseowns_UsedNecroAbilityTimerCD and findtype 8198 ground -1 -1 8 as jorpse
                        if jaseowns_ShowUsedNecroAbilityOverhead = 1
                            overhead "Cast Pain Spike"
                        endif
                        gumpresponse 19 622436516
                        wft 500
                        if targetexists 
                            while insysmsg "Unholy symbols remaining" or insysmsg "Target cannot be seen" or insysmsg "That is too far away."
                            endwhile
                            target jaseowns_BOT_TARGET
                            getlabel backpack jaseowns_PingCheck
                            if not targetexists 
                                if insysmsg "Target cannot be seen" or insysmsg "That is too far away."
                                    if find jaseowns_BOT_TARGET
                                        overhead " < Not able to target > " 34 jaseowns_BOT_TARGET
                                    else
                                        overhead " < Not able to target > " 34
                                    endif
                                elseif insysmsg "Unholy symbols remaining"
                                    settimer jaseowns_PainSpikeTimer 0
                                    settimer jaseowns_UsedNecroAbilityTimer 0
                                    cooldown PainSpike jaseowns_PainSpikeTimerCD
                                endif
                            endif
                        endif
                    endif
                endif
            endif
            
            #### then cast
        
            removelist jaseowns_SpellCastListHelper
            createlist jaseowns_SpellCastListHelper
            @setvar! jaseowns_SpellCastTimerCD 5000
            
                    
            removelist jaseowns_DebugSpellCastListHelper
            createlist jaseowns_DebugSpellCastListHelper
            
            if not listexists jaseowns_OverheadHelperList
                createlist jaseowns_OverheadHelperList
            endif
            
# Check if target has changed
if jaseowns_BOT_TARGET != 0 and find jaseowns_BOT_TARGET ground -1 -1 12
    if not varexist jaseowns_last_checked_target
        @setvar! jaseowns_last_checked_target 0
    endif
    
    if not varexist jaseowns_current_mob_type
        @setvar! jaseowns_current_mob_type "none"
    endif
    
    if jaseowns_BOT_TARGET != jaseowns_last_checked_target
        @setvar! jaseowns_last_checked_target jaseowns_BOT_TARGET
        
        getlabel jaseowns_BOT_TARGET target_name
        overhead "Target: {{target_name}}" 88
        
        # High armor, low MR creatures in Pulma
        if "ancient drowned dragon" in target_name or "deep crawler" in target_name or "deep devourer" in target_name or "drowned dragon" in target_name or "drowned lurker" in target_name or "fortress beetle" in target_name or "Great Sunken Serpent" in target_name or "husk crab" in target_name or "precursor conduit" in target_name or "precursor engineer" in target_name or "precursor guardian" in target_name or "precursor lancer" in target_name or "precursor operator" in target_name or "precursor sentry" in target_name or "precursor servitor" in target_name or "precursor technologist" in target_name or "precursor warden" in target_name or "tidal mantis" in target_name or "water dragon" in target_name or "water drake" in target_name
            overhead "High armor target detected - using penetrating spells!" 88
            @setvar! jaseowns_current_mob_type "high_armor"
            
            # Copy the high armor spell rotation from init.txt
            @setvar! jaseowns_1st_Spell jaseowns_HighArmor_1st_Spell
            @setvar! jaseowns_1st_SpellMinMana jaseowns_HighArmor_1st_SpellMinMana
            @setvar! jaseowns_1st_SpellTimerCD jaseowns_HighArmor_1st_SpellTimerCD
            
            @setvar! jaseowns_2nd_Spell jaseowns_HighArmor_2nd_Spell
            @setvar! jaseowns_2nd_SpellMinMana jaseowns_HighArmor_2nd_SpellMinMana
            @setvar! jaseowns_2nd_SpellTimerCD jaseowns_HighArmor_2nd_SpellTimerCD
            
            @setvar! jaseowns_3rd_Spell jaseowns_HighArmor_3rd_Spell
            @setvar! jaseowns_3rd_SpellMinMana jaseowns_HighArmor_3rd_SpellMinMana
            @setvar! jaseowns_3rd_SpellTimerCD jaseowns_HighArmor_3rd_SpellTimerCD
            
            @setvar! jaseowns_4th_Spell jaseowns_HighArmor_4th_Spell
            @setvar! jaseowns_4th_SpellMinMana jaseowns_HighArmor_4th_SpellMinMana
            @setvar! jaseowns_4th_SpellTimerCD jaseowns_HighArmor_4th_SpellTimerCD
            
            # Reset spell timers to cast immediately
            settimer jaseowns_1st_SpellTimer 10000
            settimer jaseowns_2nd_SpellTimer 10000
            settimer jaseowns_3rd_SpellTimer 10000
            settimer jaseowns_4th_SpellTimer 10000
        
        # Low armor, high MR creatures in Pulma
        elseif "dark water" in target_name or "drowned daemon" in target_name or "living water" in target_name or "maelstrom" in target_name or "minion" in target_name or "murky water" in target_name or "overseer" in target_name or "pure water" in target_name or "sea hag" in target_name or "sunken sorcerer" in target_name
            overhead "High magic resist target detected - using physical damage spells!" 88
            @setvar! jaseowns_current_mob_type "high_mr"
            
            # Copy the high magic resist spell rotation from init.txt
            @setvar! jaseowns_1st_Spell jaseowns_HighMR_1st_Spell
            @setvar! jaseowns_1st_SpellMinMana jaseowns_HighMR_1st_SpellMinMana
            @setvar! jaseowns_1st_SpellTimerCD jaseowns_HighMR_1st_SpellTimerCD
            
            @setvar! jaseowns_2nd_Spell jaseowns_HighMR_2nd_Spell
            @setvar! jaseowns_2nd_SpellMinMana jaseowns_HighMR_2nd_SpellMinMana
            @setvar! jaseowns_2nd_SpellTimerCD jaseowns_HighMR_2nd_SpellTimerCD
            
            @setvar! jaseowns_3rd_Spell jaseowns_HighMR_3rd_Spell
            @setvar! jaseowns_3rd_SpellMinMana jaseowns_HighMR_3rd_SpellMinMana
            @setvar! jaseowns_3rd_SpellTimerCD jaseowns_HighMR_3rd_SpellTimerCD
            
            @setvar! jaseowns_4th_Spell jaseowns_HighMR_4th_Spell
            @setvar! jaseowns_4th_SpellMinMana jaseowns_HighMR_4th_SpellMinMana
            @setvar! jaseowns_4th_SpellTimerCD jaseowns_HighMR_4th_SpellTimerCD
            
            # Reset spell timers to cast immediately
            settimer jaseowns_1st_SpellTimer 10000
            settimer jaseowns_2nd_SpellTimer 10000
            settimer jaseowns_3rd_SpellTimer 10000
            settimer jaseowns_4th_SpellTimer 10000
        
        # Balanced creatures (everything else)
        else
            overhead "Balanced target detected - using mixed spells!" 88
            @setvar! jaseowns_current_mob_type "balanced"
            
            # Copy the balanced spell rotation from init.txt
            @setvar! jaseowns_1st_Spell jaseowns_Balanced_1st_Spell
            @setvar! jaseowns_1st_SpellMinMana jaseowns_Balanced_1st_SpellMinMana
            @setvar! jaseowns_1st_SpellTimerCD jaseowns_Balanced_1st_SpellTimerCD
            
            @setvar! jaseowns_2nd_Spell jaseowns_Balanced_2nd_Spell
            @setvar! jaseowns_2nd_SpellMinMana jaseowns_Balanced_2nd_SpellMinMana
            @setvar! jaseowns_2nd_SpellTimerCD jaseowns_Balanced_2nd_SpellTimerCD
            
            @setvar! jaseowns_3rd_Spell jaseowns_Balanced_3rd_Spell
            @setvar! jaseowns_3rd_SpellMinMana jaseowns_Balanced_3rd_SpellMinMana
            @setvar! jaseowns_3rd_SpellTimerCD jaseowns_Balanced_3rd_SpellTimerCD
            
            @setvar! jaseowns_4th_Spell jaseowns_Balanced_4th_Spell
            @setvar! jaseowns_4th_SpellMinMana jaseowns_Balanced_4th_SpellMinMana
            @setvar! jaseowns_4th_SpellTimerCD jaseowns_Balanced_4th_SpellTimerCD
            
            # Reset spell timers to cast immediately
            settimer jaseowns_1st_SpellTimer 10000
            settimer jaseowns_2nd_SpellTimer 10000
            settimer jaseowns_3rd_SpellTimer 10000
            settimer jaseowns_4th_SpellTimer 10000
        endif
        
        # Check for AoE opportunity
        if counttype 'any' 'ground' 0 3 > 2
            mana
            wait 100
            if mana > 60  # Only use AoE if we have plenty of mana
                overhead "Multiple enemies detected - using AoE!" 33
                
                # Copy the AoE spell rotation from init.txt
                @setvar! jaseowns_1st_Spell jaseowns_AoE_1st_Spell
                @setvar! jaseowns_1st_SpellMinMana jaseowns_AoE_1st_SpellMinMana
                @setvar! jaseowns_1st_SpellTimerCD jaseowns_AoE_1st_SpellTimerCD
                
                @setvar! jaseowns_2nd_Spell jaseowns_AoE_2nd_Spell
                @setvar! jaseowns_2nd_SpellMinMana jaseowns_AoE_2nd_SpellMinMana
                @setvar! jaseowns_2nd_SpellTimerCD jaseowns_AoE_2nd_SpellTimerCD
                
                # Reset spell timers to cast immediately
                settimer jaseowns_1st_SpellTimer 10000
                settimer jaseowns_2nd_SpellTimer 10000
            else
                overhead "Not enough mana for AoE" 33
            endif
        endif
    endif
endif


 
            @setvar! jaseowns_CurrentSpellCast 0
            @setvar! jaseowns_CurrentSpellCastTimerCD 0

            if jaseowns_CastCurse_1st = 1 and not inlist jaseowns_CastedCrusedList jaseowns_BOT_TARGET
                settimer jaseowns_Precast_Spell_One_Timer jaseowns_Precast_Spell_One_TimerCD 
            elseif jaseowns_CastManaDrain_1st = 1 and not inlist jaseowns_CastedManaDrainList jaseowns_BOT_TARGET
                settimer jaseowns_Precast_Spell_One_Timer jaseowns_Precast_Spell_One_TimerCD 
            elseif jaseowns_CastCurse_2nd = 1 and not inlist jaseowns_CastedCrusedList jaseowns_BOT_TARGET
                settimer jaseowns_Precast_Spell_Two_Timer jaseowns_Precast_Spell_Two_TimerCD 
            elseif jaseowns_CastManaDrain_2nd = 1 and not inlist jaseowns_CastedManaDrainList jaseowns_BOT_TARGET
                settimer jaseowns_Precast_Spell_Two_Timer jaseowns_Precast_Spell_Two_TimerCD 
            endif    
            
            # 1/20/2025 - This may or may not help reapply poison
            if jaseowns_CastPoison = 1 and timer jaseowns_CastPoisonTimer >= jaseowns_CastPoisonTimerCD and mana >= jaseowns_CastPoisonMinMana
            
                for 3
                    if dead jaseowns_BOT_TARGET
                        break
                    endif
                    getlabel jaseowns_BOT_TARGET jaseowns_PoisonCheck
                    if "-" in jaseowns_PoisonCheck
                        // do nothing - try again
                    else
                        break
                    endif
                endfor    

                if "Ticks" in jaseowns_PoisonCheck
                 // do nothing
                else
                    clearlist jaseowns_CastedPoisonList
                endif
            endif
            
            if jaseowns_CastPoison = 1 and timer jaseowns_CastPoisonTimer >= jaseowns_CastPoisonTimerCD and mana >= jaseowns_CastPoisonMinMana and not inlist jaseowns_CastedPoisonList jaseowns_BOT_TARGET
                @setvar! jaseowns_CurrentSpellCast 20
                @setvar! jaseowns_CurrentSpellCastIndex 1
                @setvar! jaseowns_CurrentSpellCastTimerCD 0
            elseif jaseowns_Precast_Spell_One_TimerCD != 0 and timer jaseowns_Precast_Spell_One_Timer >= jaseowns_Precast_Spell_One_TimerCD and mana >= jaseowns_Precast_Spell_One_MinMana 
                @setvar! jaseowns_CurrentSpellCast jaseowns_Precast_Spell_One
                @setvar! jaseowns_CurrentSpellCastIndex 69 
                @setvar! jaseowns_CurrentSpellCastTimerCD jaseowns_Precast_Spell_One_TimerCD
            elseif jaseowns_Precast_Spell_Two_TimerCD != 0 and timer jaseowns_Precast_Spell_Two_Timer >= jaseowns_Precast_Spell_Two_TimerCD and mana >= jaseowns_Precast_Spell_Two_MinMana 
                @setvar! jaseowns_CurrentSpellCast jaseowns_Precast_Spell_Two
                @setvar! jaseowns_CurrentSpellCastIndex 70   
                @setvar! jaseowns_CurrentSpellCastTimerCD jaseowns_Precast_Spell_Two_TimerCD
            elseif jaseowns_1st_Spell != 0 and timer jaseowns_1st_SpellTimer >= jaseowns_1st_SpellTimerCD and mana >= jaseowns_1st_SpellMinMana 
                @setvar! jaseowns_CurrentSpellCast jaseowns_1st_Spell
                @setvar! jaseowns_CurrentSpellCastIndex 1
                @setvar! jaseowns_CurrentSpellCastTimerCD jaseowns_1st_SpellTimerCD
            elseif jaseowns_2nd_Spell != 0 and timer jaseowns_2nd_SpellTimer >= jaseowns_2nd_SpellTimerCD and mana >= jaseowns_2nd_SpellMinMana 
                @setvar! jaseowns_CurrentSpellCast jaseowns_2nd_Spell
                @setvar! jaseowns_CurrentSpellCastIndex 2
                @setvar! jaseowns_CurrentSpellCastTimerCD jaseowns_2nd_SpellTimerCD
            elseif jaseowns_3rd_Spell != 0 and timer jaseowns_3rd_SpellTimer >= jaseowns_3rd_SpellTimerCD and mana >= jaseowns_3rd_SpellMinMana 
                @setvar! jaseowns_CurrentSpellCast jaseowns_3rd_Spell
                @setvar! jaseowns_CurrentSpellCastIndex 3
                @setvar! jaseowns_CurrentSpellCastTimerCD jaseowns_3rd_SpellTimerCD
            elseif jaseowns_4th_Spell != 0 and timer jaseowns_4th_SpellTimer >= jaseowns_4th_SpellTimerCD and mana >= jaseowns_4th_SpellMinMana 
                @setvar! jaseowns_CurrentSpellCast jaseowns_4th_Spell
                @setvar! jaseowns_CurrentSpellCastIndex 4
                @setvar! jaseowns_CurrentSpellCastTimerCD jaseowns_4th_SpellTimerCD
            elseif jaseowns_5th_Spell != 0 and timer jaseowns_5th_SpellTimer >= jaseowns_5th_SpellTimerCD and mana >= jaseowns_5th_SpellMinMana 
                @setvar! jaseowns_CurrentSpellCast jaseowns_5th_Spell
                @setvar! jaseowns_CurrentSpellCastIndex 5
                @setvar! jaseowns_CurrentSpellCastTimerCD jaseowns_5th_SpellTimerCD
            elseif jaseowns_6th_Spell != 0 and timer jaseowns_6th_SpellTimer >= jaseowns_6th_SpellTimerCD and mana >= jaseowns_6th_SpellMinMana 
                @setvar! jaseowns_CurrentSpellCast jaseowns_6th_Spell
                @setvar! jaseowns_CurrentSpellCastIndex 6
                @setvar! jaseowns_CurrentSpellCastTimerCD jaseowns_6th_SpellTimerCD
            elseif jaseowns_7th_Spell != 0 and timer jaseowns_7th_SpellTimer >= jaseowns_7th_SpellTimerCD and mana >= jaseowns_7th_SpellMinMana 
                @setvar! jaseowns_CurrentSpellCast jaseowns_7th_Spell
                @setvar! jaseowns_CurrentSpellCastIndex 7
                @setvar! jaseowns_CurrentSpellCastTimerCD jaseowns_5th_SpellTimerCD
            endif


            # todo fix this !
            @setvar! jaseowns_SpellSuccess 0

            
            if jaseowns_CurrentSpellCast != 0
                
                if jaseowns_AutoTaunting = 1 and find jaseowns_BOT_TARGET ground -1 -1 10 and hp >= 80
                    if not cooldown "Taunting" and timer jaseowns_TauntingTimer >= jaseowns_TauntingTimerCD
                        while insysmsg "Cannot be seen" or insysmsg "Target cannot be seen" or insysmsg "That is too far away."
                        endwhile
                        say "[Taunt"
                        wft 500
                        if targetexists 
                            target jaseowns_BOT_TARGET
                            getlabel backpack jaseowns_PingCheck
                            if not targetexists 
                                if insysmsg "Cannot be seen"
                                    // do nothing
                                else
                                    cooldown "Taunting" jaseowns_TauntingTimerCD
                                    settimer jaseowns_TauntingTimer 0
                                endif
                            endif
                        endif
                    endif
                endif
            
                if insysmsg "Weapon ability ready"
                    settimer jaseowns_UseAbility1Timer jaseowns_UseAbilityTimerCD
                    settimer jaseowns_UseAbility2Timer jaseowns_UseAbilityTimerCD
                    settimer jaseowns_UseAbility3Timer jaseowns_UseAbilityTimerCD
                    cooldown "Seeking" 0
                    cooldown "Leyline" 0
                    cooldown "Soulfire" 0
                endif
                
                if cooldown "Mana Thief" and jaseowns_UseSeekingWhenManaThiefIsProcced = 1
                    if timer jaseowns_UseAbility2Timer >= jaseowns_UseAbilityTimerCD and mana <= jaseowns_UseSeekingWhenManaThiefIsProccedManaCheck
                        while insysmsg "You cannot perform that ability yet." or insysmsg "You have not yet unlocked that weapon ability."
                            if not cooldown "Seeking"
                                cooldown "Seeking" jaseowns_WeaponAbilityCooldownBasedOnArmsLore
                            endif
                        endwhile
                        say "[WeaponAbility1"
                        getlabel backpack jaseowns_PingCheck 
                        if insysmsg "You cannot perform that ability yet."
                            if not cooldown "Seeking"
                                cooldown "Seeking" jaseowns_WeaponAbilityCooldownBasedOnArmsLore
                            endif
                            settimer jaseowns_UseAbility2Timer 0
                        elseif insysmsg "You have not yet unlocked that weapon ability."
                            @setvar! jaseowns_UseSeekingWhenManaThiefIsProcced 0
                        else
                            settimer jaseowns_UseAbility2Timer 0 
                        endif
                    endif   
                else
                    
                    if jaseowns_UseAbility1 = 1 and timer jaseowns_UseAbility1Timer >= jaseowns_UseAbilityTimerCD
                        while insysmsg "You cannot perform that ability yet." or insysmsg "You have not yet unlocked that weapon ability."
                            if not cooldown "Seeking"
                                cooldown "Seeking" jaseowns_WeaponAbilityCooldownBasedOnArmsLore
                            endif
                        endwhile
                        say "[WeaponAbility1"
                        getlabel backpack jaseowns_PingCheck 
                        if insysmsg "You cannot perform that ability yet."
                            if not cooldown "Seeking"
                                cooldown "Seeking" jaseowns_WeaponAbilityCooldownBasedOnArmsLore
                            endif
                            settimer jaseowns_UseAbility1Timer 0
                        elseif insysmsg "You have not yet unlocked that weapon ability."
                            @setvar! jaseowns_UseAbility1 0
                        else
                            settimer jaseowns_UseAbility1Timer 0 
                        endif
                    endif 
                
                    if jaseowns_UseAbility2 = 1 and timer jaseowns_UseAbility2Timer >= jaseowns_UseAbilityTimerCD and mana <= jaseowns_UseKeyLimePieAbilityMana
                        while insysmsg "You cannot perform that ability yet." or insysmsg "You have not yet unlocked that weapon ability."
                            if not cooldown "Leyline"
                                cooldown "Leyline" jaseowns_WeaponAbilityCooldownBasedOnArmsLore
                            endif
                        endwhile
                        say "[WeaponAbility2"
                        getlabel backpack jaseowns_PingCheck 
                        if insysmsg "You cannot perform that ability yet."
                            if not cooldown "Leyline"
                                cooldown "Leyline" jaseowns_WeaponAbilityCooldownBasedOnArmsLore
                            endif
                            settimer jaseowns_UseAbility2Timer 0
                        elseif insysmsg "You have not yet unlocked that weapon ability."
                            @setvar! jaseowns_UseAbility2 0
                        else
                            settimer jaseowns_UseAbility2Timer 0 
                        endif
                    endif   
                    
                    if jaseowns_UseAbility3 = 1 and timer jaseowns_UseAbility3Timer >= jaseowns_UseAbilityTimerCD
                        while insysmsg "You cannot perform that ability yet." or insysmsg "You have not yet unlocked that weapon ability."
                            if not cooldown "Soulfire"
                                cooldown "Soulfire" jaseowns_WeaponAbilityCooldownBasedOnArmsLore
                            endif
                        endwhile
                        say "[WeaponAbility3"
                        getlabel backpack jaseowns_PingCheck 
                        if insysmsg "You cannot perform that ability yet."
                            if not cooldown "Soulfire"
                                cooldown "Soulfire" jaseowns_WeaponAbilityCooldownBasedOnArmsLore
                            endif
                            settimer jaseowns_UseAbility3Timer 0
                        elseif insysmsg "You have not yet unlocked that weapon ability."
                            @setvar! jaseowns_UseAbility3 0
                        else
                            settimer jaseowns_UseAbility3Timer 0 
                        endif
                    endif   
                
                endif
                
                
            
                # Eat a mushroom
                if jaseowns_EatShroomies = 1 and not queued and timer jaseowns_EatShroomiesTimer >= jaseowns_EatShroomiesTimerCD and diffmana >= jaseowns_EatShroomiesAtDiffMana and findtype 29012 backpack 2963 as item
                    while insysmsg "You are already at your maximum mana." or insysmsg "You consume a magic mushroom and restore some mana."
                    endwhile
                    dclick item
                    getlabel backpack jaseowns_PingCheck
                    if insysmsg "You are already at your maximum mana."
                        // do nothing
                    elseif insysmsg "You consume a magic mushroom and restore some mana."
                        settimer jaseowns_EatShroomiesTimer 0
                    else
                        getlabel backpack jaseowns_PingCheck
                        if insysmsg "You consume a magic mushroom and restore some mana."
                            settimer jaseowns_EatShroomiesTimer 0
                        else
                            settimer jaseowns_EatShroomiesTimer 55000
                        endif
                    endif
                endif
                
                if targetexists 
                    if jaseowns_DEBUG_MODE = 1
                        overhead "Canceling during harmful spell cast.. any"
                    endif
                    hotkey "Cancel Current Target"
                endif
                settimer jaseowns_SpellCastTargetTimer 0
                if not targetexists "harmful" and not dead jaseowns_BOT_TARGET
                    cast jaseowns_CurrentSpellCast
                    while insysmsg "Target a new 'Last Target'" or insysmsg "New target set" or insysmsg "Last Target set" or insysmsg "Your concentration is disturbed, thus ruining thy spell." or insysmsg "You have not yet recovered from casting a spell." or insysmsg "cannot cast a spell while" or insysmsg "You have not yet recovered from casting a spell" or insysmsg "Target cannot be seen" or insysmsg "That is too far away."
                    endwhile
                    @setvar! jaseowns_ResetBotTargetToNewTarget 0
                    while timer jaseowns_SpellCastTargetTimer <= jaseowns_SpellCastTimerCD
                        getlabel backpack jaseowns_PingCheck
                    
                        if insysmsg "Target a new 'Last Target'"
                            overhead "Set your new target"
                            while targetexists 
                                wait 50
                            endwhile
                        endif  
                        
                        if jaseowns_RetargetWhileCasting = 1 and insysmsg "New target set"
                            overhead "There was a new target system message!"
                            @setvar! jaseowns_ResetBotTargetToNewTarget 1
                        elseif jaseowns_RetargetWhileCasting = 1 and insysmsg "Last Target set"
                            @setvar! jaseowns_ResetBotTargetToNewTarget 1
                        endif
                        
                        if jaseowns_ResetBotTargetToNewTarget = 1
                            
                            settimer jaseowns_TargetNextButInRangeTimer 0
                            @setvar! jaseowns_BOT_CYCLE_TARGET_HELPER 0
                            while timer jaseowns_TargetNextButInRangeTimer < 2000
                                
                                @setvar! jaseowns_USER_LAST_TARGET lasttarget
                                @setvar! jaseowns_USER_LAST_TARGET_FRIENDLY 0
                                
                                overhead "Scanning.." 89 jaseowns_USER_LAST_TARGET
 
                                if jaseowns_USER_LAST_TARGET = jaseowns_BOT_TARGET
                                    sysmsg "They are equal buddy"
                                    if jaseowns_BOT_CYCLE_TARGET_HELPER = 0
                                        @setvar! jaseowns_BOT_CYCLE_TARGET_HELPER jaseowns_BOT_TARGET
                                    else
                                        sysmsg "There was no more mobs" 34
                                        sysmsg "There was no more mobs" 34
                                        sysmsg "There was no more mobs" 34
                                        settimer jaseowns_TargetNextButInRangeTimer 3000
                                        break
                                    endif
                                endif

                                if inlist jaseowns_IGNORE_CREATURES jaseowns_USER_LAST_TARGET
                                    if jaseowns_DEBUG_MODE = 1
                                        sysmsg "Ignoring due to something something" 88
                                    endif
                                elseif jaseowns_BOT_TARGET != 0 and jaseowns_USER_LAST_TARGET != jaseowns_BOT_TARGET and find jaseowns_USER_LAST_TARGET ground -1 -1 12 and not dead jaseowns_USER_LAST_TARGET
                                    if jaseowns_DEBUG_MODE = 1
                                        sysmsg "{{jaseowns_USER_LAST_TARGET}} {{jaseowns_BOT_TARGET}}"
                                    endif
                                    if noto jaseowns_USER_LAST_TARGET = "friend" or noto jaseowns_USER_LAST_TARGET = "innocent" or noto jaseowns_USER_LAST_TARGET = "invulnerable"
                                        @setvar! jaseowns_USER_LAST_TARGET_FRIENDLY 1
                                        if jaseowns_DEBUG_MODE = 1
                                            sysmsg "friendly"
                                        endif
                                        @setvar! jaseowns_SKIP_LAST_TARGET jaseowns_USER_LAST_TARGET
                                        // do nothing
                                    elseif noto jaseowns_USER_LAST_TARGET = "murderer" or noto jaseowns_USER_LAST_TARGET = "enemy"
                                        @setvar! jaseowns_SKIP_LAST_TARGET jaseowns_USER_LAST_TARGET
                                        if jaseowns_DEBUG_MODE = 1
                                            sysmsg "murderer"
                                        endif
                                        // do nothing they are mean players
                                    elseif noto jaseowns_USER_LAST_TARGET = "hostile" or noto jaseowns_USER_LAST_TARGET = "criminal"

                                        if find jaseowns_USER_LAST_TARGET ground -1 -1 12
                                            overhead "WE SHOULD BE HERE BRO" 89
                                            sysmsg "WE SHOULD BE HERE BRO" 89
                                            if jaseowns_DEBUG_MODE = 1
                                                overhead "We are switching the target"
                                            endif
                                            @setvar! jaseowns_BOT_TARGET_PREVIOUS jaseowns_BOT_TARGET
                                            @setvar! jaseowns_BOT_TARGET lasttarget
                                            settimer jaseowns_TargetNextButInRangeTimer 3000
                                            break
                                        endif
                                    elseif jaseowns_DEBUG_MODE = 1
                                        sysmsg "unknown"
                                        break
                                    endif
                                endif
                                
                                hotkey "Next Monster Target"                                
                                getlabel backpack jaseowns_PingCheck
                            endwhile
                            
                            @setvar! jaseowns_ResetBotTargetToNewTarget 0
                            while insysmsg "Target a new 'Last Target'" or insysmsg "New target set" or insysmsg "Last Target set" or insysmsg "Your concentration is disturbed, thus ruining thy spell." or insysmsg "You have not yet recovered from casting a spell." or insysmsg "cannot cast a spell while" or insysmsg "You have not yet recovered from casting a spell" or insysmsg "Target cannot be seen" or insysmsg "That is too far away."
                            endwhile
                            
                        endif
                    
                        // wait
                        if insysmsg "Your concentration is disturbed, thus ruining thy spell." or insysmsg "You have not yet recovered from casting a spell." or insysmsg "cannot cast a spell while" or insysmsg "You have not yet recovered from casting a spell"
                            #or insysmsg "off your feet"
                            break
                        elseif insysmsg "You have been shocked and cannot move"
                            # overhead "Shocking!" 
                        elseif targetexists "harmful"
                            if jaseowns_DEBUG_MODE = 1
                                overhead "Spell ready: {{jaseowns_SpellCastTargetTimer}}"
                            endif
                            break
                        elseif dead jaseowns_BOT_TARGET
                            if timerexists jaseowns_BOT_TARGET_IS_INVIS_MOB
                                // do nothing
                            else
                                hotkey "> Interrupt"    
                            endif
                        elseif hp <= jaseowns_HpCheckToInterruptCastIfLessThan
                            hotkey "> Interrupt"
                        elseif not warmode
                            hotkey "> Interrupt"
                            if skill "Arcane" >= 80
                                attack jaseowns_BOT_TARGET
                            endif
                        elseif hp <= jaseowns_HpCheckToDrinkPotionCastIfLessThan
                            if jaseowns_UseHealPotion = 1 and timer jaseowns_UseHealPotionTimer >= jaseowns_UseHealPotionTimerCD
                                if findtype 3852 self 0 as jaseowns_UseItem
                                    getlabel jaseowns_UseItem desc
                                    if "next" in desc
                                        // wait 
                                    else
                                        dclick jaseowns_UseItem
                                        getlabel jaseowns_UseItem desc
                                        if "next" in desc
                                            cooldown "Heal Potion" jaseowns_UseHealPotionTimerCD
                                            settimer jaseowns_UseHealPotionTimer 0
                                        endif
                                    endif
                                endif
                            endif
                        endif
                    endwhile
                endif
                if dead jaseowns_BOT_TARGET and targetexists 
                    if timerexists jaseowns_BOT_TARGET_IS_INVIS_MOB
                        settimer jaseowns_BOT_INVIS_MOB_TIMER 0
                        @setvar! jaseowns_BOT_INVIS_MOB_TIMER_CD 2500
                        while timer jaseowns_BOT_INVIS_MOB_TIMER <= jaseowns_BOT_INVIS_MOB_TIMER_CD
                            overhead "Waiting for mob to appear"
                            if not dead jaseowns_BOT_TARGET
                                break
                            endif
                        endwhile
                        removetimer jaseowns_BOT_INVIS_MOB_TIMER
                        if dead jaseowns_BOT_TARGET
                            removetimer jaseowns_BOT_TARGET_IS_INVIS_MOB
                        endif
                    else
                        if jaseowns_DEBUG_MODE = 1 
                            overhead "It died while we casted"
                        endif
                        hotkey "Cancel Current Target"                        
                    endif
                endif
                getlabel backpack jaseowns_PingCheck
                if targetexists "harmful"
                    target jaseowns_BOT_TARGET
                    getlabel backpack jaseowns_PingCheck
                    if insysmsg "Target cannot be seen" or insysmsg "That is too far away."
                        if find jaseowns_BOT_TARGET
                            overhead " < Not able to target > " 34 jaseowns_BOT_TARGET
                        else 
                            overhead " < Not able to target > " 34
                        endif
                        @setvar! jaseowns_BOT_STATE 10
                    elseif targetexists 
                        overhead "Canceling during harmful spell cast.. any after the fact"
                        hotkey "Cancel Current Target"
                    else
                        if not timerexists jaseowns_WeCastedSuccessfullyTimer
                            settimer jaseowns_WeCastedSuccessfullyTimer 0
                        endif
                        @setvar! jaseowns_SpellSuccess 1
                    endif
                    if targetexists "harmful"
                        if jaseowns_DEBUG_MODE = 1
                            overhead "Canceling during harmful spell cast.. any after the fact 2"
                        endif
                        hotkey "Cancel Current Target"
                    endif
                elseif targetexists "neutral" and jaseowns_CurrentSpellCast = 49
                    target jaseowns_BOT_TARGET
                    getlabel backpack jaseowns_PingCheck
                    if insysmsg "Target cannot be seen" or insysmsg "That is too far away."
                        if find jaseowns_BOT_TARGET
                            overhead " < Not able to target > " 34 jaseowns_BOT_TARGET
                        else
                            overhead " < Not able to target > " 34
                        endif
                        @setvar! jaseowns_BOT_STATE 10
                    elseif targetexists 
                        overhead "Canceling during harmful spell cast.. any after the fact"
                        hotkey "Cancel Current Target"
                    else
                        if not timerexists jaseowns_WeCastedSuccessfullyTimer
                            settimer jaseowns_WeCastedSuccessfullyTimer 0
                        endif
                        @setvar! jaseowns_SpellSuccess 1
                    endif
                    if targetexists "neutral"
                        if jaseowns_DEBUG_MODE = 1
                            overhead "Canceling during harmful spell cast.. any after the fact 2"
                        endif
                        hotkey "Cancel Current Target"
                    endif
                endif
            endif

            if jaseowns_SpellSuccess = 1
                
 
                
                # Purple Potion
                if not queued and jaseowns_AutoExplodePot = 1 and find jaseowns_BOT_TARGET ground -1 -1 8 and findtype 3853 self 0 as jaseowns_Pot
                    if timer jaseowns_AutoExplodePotTimer >= jaseowns_AutoExplodePotTimerCD and timer jaseowns_UseItemTimer >= jaseowns_UseItemTimerCD
                        @ignore jaseowns_Pot
                        dclick jaseowns_Pot
                        settimer jaseowns_UseItemTimer 0
                        getlabel jaseowns_Pot jaseowns_PotDesc    
                        if "next" in jaseowns_PotDesc
                            if "12 seconds" in jaseowns_PotDesc
                                @setvar! jaseowns_AutoExplodePotTimerCD 12000
                            elseif "13 seconds" in jaseowns_PotDesc
                                @setvar! jaseowns_AutoExplodePotTimerCD 13000
                            elseif "14 seconds" in jaseowns_PotDesc
                                @setvar! jaseowns_AutoExplodePotTimerCD 14000
                            elseif "15 seconds" in jaseowns_PotDesc
                                @setvar! jaseowns_AutoExplodePotTimerCD 15000
                            endif
                            settimer jaseowns_AutoExplodePotTimer 0
                            cooldown "Purple Pot" jaseowns_AutoExplodePotTimerCD
                        endif
                        while insysmsg "Target cannot be seen"
                            overhead "clearing the target cannot be seen"
                        endwhile
                        wft 500
                        target jaseowns_BOT_TARGET
                        getlabel backpack jaseowns_PingCheck
                        if insysmsg "Target cannot be seen"
                            while timer jaseowns_UseItemTimer < jaseowns_UseItemTimerCD
                            endwhile
                            dclick jaseowns_Pot
                            wft 500
                        endif
                        if targetexists and findtype 3853 backpack -1 1 1 as jaseowns_ThisOldPot
                            overhead "YEETING POTION" 89
                            target jaseowns_ThisOldPot
                        endif
                        @unignore jaseowns_Pot
                    endif
                endif
            
                if jaseowns_DEBUG_MODE = 1
                    overhead "Spell Successful: {{jaseowns_SpellCastTargetTimer}}" 14
                    sysmsg "Spell Successful: {{jaseowns_SpellCastTargetTimer}}" 14
                endif

                if jaseowns_CurrentSpellCast = jaseowns_1st_Spell
                    settimer jaseowns_1st_SpellTimer 0
                elseif jaseowns_CurrentSpellCast = jaseowns_2nd_Spell
                    settimer jaseowns_2nd_SpellTimer 0
                elseif jaseowns_CurrentSpellCast = jaseowns_3rd_Spell
                    settimer jaseowns_3rd_SpellTimer 0
                elseif jaseowns_CurrentSpellCast = jaseowns_4th_Spell
                    settimer jaseowns_4th_SpellTimer 0
                elseif jaseowns_CurrentSpellCast = jaseowns_5th_Spell
                    settimer jaseowns_5th_SpellTimer 0
                elseif jaseowns_CurrentSpellCast = jaseowns_6th_Spell
                    settimer jaseowns_6th_SpellTimer 0
                elseif jaseowns_CurrentSpellCast = jaseowns_7th_Spell
                    settimer jaseowns_7th_SpellTimer 0
                elseif jaseowns_CurrentSpellCast = jaseowns_Precast_Spell_One
                    settimer jaseowns_Precast_Spell_One_Timer 0
                elseif jaseowns_CurrentSpellCast = jaseowns_Precast_Spell_Two
                    settimer jaseowns_Precast_Spell_Two_Timer 0
                endif
                
                if jaseowns_CurrentSpellCast = 27
                    cooldown "Curse" jaseowns_CurrentSpellCastTimerCD
                    pushlist jaseowns_CastedCrusedList jaseowns_BOT_TARGET
                elseif jaseowns_CurrentSpellCast = 31
                    cooldown "ManaDrain" jaseowns_CurrentSpellCastTimerCD
                    pushlist jaseowns_CastedManaDrainList jaseowns_BOT_TARGET
                elseif jaseowns_CurrentSpellCast = 5
                    cooldown "MagicArrow" jaseowns_CurrentSpellCastTimerCD
                elseif jaseowns_CurrentSpellCast = 12
                    cooldown "Harm" jaseowns_CurrentSpellCastTimerCD
                elseif jaseowns_CurrentSpellCast = 18
                    cooldown "Fireball" jaseowns_CurrentSpellCastTimerCD
                elseif jaseowns_CurrentSpellCast = 20

                    settimer jaseowns_CastPoisonTimer 0
                    getlabel jaseowns_BOT_TARGET jaseowns_CheckLeathPoisonDesc
                    if "Lethal" in jaseowns_CheckLeathPoisonDesc
                        pushlist jaseowns_CastedPoisonList jaseowns_BOT_TARGET
                    elseif skill "Poisoning" >= 100 and skill "Magery" >= 100
                        if findtype "Green Potion" self as jaseowns_Pot
##  - removing this check for lethal potion to avoid extra lag, 
##  - lets assume if you have a
##  - green pot, its a lethal
#                            getlabel jaseowns_Pot jaseowns_PotDesc
#                            if "lethal" in jaseowns_PotDesc
#                                // continue
#                            else
#                                pushlist jaseowns_CastedPoisonList jaseowns_BOT_TARGET
#                            endif
                        else
                            pushlist jaseowns_CastedPoisonList jaseowns_BOT_TARGET
                        endif
                    else
                        pushlist jaseowns_CastedPoisonList jaseowns_BOT_TARGET
                    endif
                elseif jaseowns_CurrentSpellCast = 30
                    cooldown Lightning jaseowns_CurrentSpellCastTimerCD
                elseif jaseowns_CurrentSpellCast = 37
                    cooldown MindBlast jaseowns_CurrentSpellCastTimerCD
                elseif jaseowns_CurrentSpellCast = 42
                    cooldown EnergyBolt jaseowns_CurrentSpellCastTimerCD
                elseif jaseowns_CurrentSpellCast = 43
                    cooldown Explosion jaseowns_CurrentSpellCastTimerCD
                elseif jaseowns_CurrentSpellCast = 49
                    cooldown "Chain Lightning" jaseowns_CurrentSpellCastTimerCD
                elseif jaseowns_CurrentSpellCast = 51
                    cooldown Flamestrike jaseowns_CurrentSpellCastTimerCD
                elseif jaseowns_CurrentSpellCast = 53
                    cooldown ManaVampire jaseowns_CurrentSpellCastTimerCD
                elseif jaseowns_CurrentSpellCast = 55
                    cooldown MeteorSwarm jaseowns_CurrentSpellCastTimerCD
                elseif jaseowns_CurrentSpellCast = 57
                    cooldown Earthquake jaseowns_CurrentSpellCastTimerCD
                endif
            endif
        else
            sysmsg "We think we are holding a spell?" 34
        endif

    elseif jaseowns_BOT_STATE = 35
        
        if skill "Peacemaking" >= 50
            @setvar! jaseowns_BOT_BARD_PEACED 0
            if not findbuff "song of peacemaking" and timer jaseowns_UseSkillTimer >= 11000
                useskill 'Peacemaking'
                wft 500
                if insysmsg "What instrument"
                    if findtype 3740|3742|3762|3763|10245|20006|20008|20010|20012|20014|20016 backpack as jaseowns_BardInstrument
                        target jaseowns_BardInstrument
                    else
                        overhead "I do not have an inny" 34
                        @setvar! jaseowns_BOT_BARD_PEACED 1
                    endif
                    wft 500
                endif
                target backpack
                settimer jaseowns_UseSkillTimer 0
            endif  
        else
            @setvar! jaseowns_BOT_BARD_PEACED 1    
        endif

        if skill "Discordance" >= 50
            @setvar! jaseowns_BOT_BARD_DISCORDED 0
            if not findbuff "song of discordance" and timer jaseowns_UseSkillTimer >= 11000
                useskill 'Discordance'
                wft 500
                if insysmsg "What instrument"
                    if findtype 3740|3742|3762|3763|10245|20006|20008|20010|20012|20014|20016 backpack as jaseowns_BardInstrument
                        target jaseowns_BardInstrument
                    else
                        overhead "I do not have an inny" 34
                        @setvar! jaseowns_BOT_BARD_DISCORDED 1
                    endif
                    wft 500
                endif
                target backpack
                settimer jaseowns_UseSkillTimer 0
            endif 
        else
            @setvar! jaseowns_BOT_BARD_DISCORDED 1
        endif

        if skill "Provocation" >= 50 
            @setvar! jaseowns_BOT_BARD_PROVOED 0
            if not findbuff "song of provocation" and timer jaseowns_UseSkillTimer >= 11000
                useskill 'Provocation'
                wft 500
                if insysmsg "What instrument"
                    if findtype 3740|3742|3762|3763|10245|20006|20008|20010|20012|20014|20016 backpack as jaseowns_BardInstrument
                        target jaseowns_BardInstrument
                    else
                        overhead "I do not have an inny" 34
                        @setvar! jaseowns_BOT_BARD_PROVOED 1
                    endif
                    wft 500
                endif
                target backpack
                settimer jaseowns_UseSkillTimer 0
            endif 
        else
            @setvar! jaseowns_BOT_BARD_PROVOED 1
        endif
    
        if warmode and find jaseowns_BOT_TARGET ground -1 -1 10
            if jaseowns_BOT_BARD_PEACED = 0
                getlabel jaseowns_BOT_TARGET jaseowns_BardDesc
                if "discord" in jaseowns_BardDesc or jaseowns_Bard_DiscordAutomatically = 0
                    @setvar! jaseowns_BOT_BARD_DISCORDED 1
                endif
                if "pacified" in jaseowns_BardDesc or jaseowns_Bard_PeaceAutomatically = 0
                    @setvar! jaseowns_BOT_BARD_PEACED 1
                elseif timer jaseowns_UseSkillTimer >= 11000 
                    useskill 'Peacemaking'
                    wft 500
                    if insysmsg "What instrument"
                        if findtype 3740|3742|3762|3763|10245|20006|20008|20010|20012|20014|20016 backpack as jaseowns_BardInstrument
                            target jaseowns_BardInstrument
                        else
                            overhead "I do not have an inny" 34
                            @setvar! jaseowns_BOT_BARD_PEACED 1
                        endif
                        wft 500
                    endif
                    if targetexists 
                        target jaseowns_BOT_TARGET
                        overhead "-- ATTEMPT PEACE --" 89 jaseowns_BOT_TARGET
                    endif
                    settimer jaseowns_UseSkillTimer 5000
                endif
            endif

            if jaseowns_BOT_BARD_DISCORDED = 0
                getlabel jaseowns_BOT_TARGET jaseowns_BardDesc
                if "pacified" in jaseowns_BardDesc or jaseowns_Bard_PeaceAutomatically = 0
                    @setvar! jaseowns_BOT_BARD_PEACED 1
                endif
                if "discord" in jaseowns_BardDesc or jaseowns_Bard_DiscordAutomatically = 0
                    @setvar! jaseowns_BOT_BARD_DISCORDED 1
                elseif timer jaseowns_UseSkillTimer >= 11000 
                    useskill 'Discordance'
                    wft 500
                    if insysmsg "What instrument"
                        if findtype 3740|3742|3762|3763|10245|20006|20008|20010|20012|20014|20016 backpack as jaseowns_BardInstrument
                            target jaseowns_BardInstrument
                        else
                            overhead "I do not have an inny" 34
                            @setvar! jaseowns_BOT_BARD_DISCORDED 1
                        endif
                        wft 500
                    endif
                    if targetexists 
                        target jaseowns_BOT_TARGET
                        overhead "-- ATTEMPT DISCORD --" 89 jaseowns_BOT_TARGET
                    endif
                    settimer jaseowns_UseSkillTimer 5000
                endif
            endif
        endif
        
        // we will cast spells here and shit
        // waiting for target to die
        if dead jaseowns_BOT_TARGET
            @setvar! jaseowns_BOT_STATE 10
        elseif jaseowns_BOT_BARD_PEACED = 1 and jaseowns_BOT_BARD_DISCORDED  = 1
            if warmode
                @setvar! jaseowns_BOT_STATE 40
            endif
        endif
    elseif jaseowns_BOT_STATE = 30
        
        if jaseowns_BOT_SELF = jaseowns_BOT_TARGET
            @setvar! jaseowns_SKIP_LAST_TARGET self
            if jaseowns_DEBUG_MODE = 1
                overhead "dont attack urself bro" 34    
            endif
            @setvar! jaseowns_BOT_STATE 10
        elseif jaseowns_USER_LAST_TARGET_FRIENDLY = 1
            // skip processing a friendly
            if jaseowns_DEBUG_MODE = 1
                sysmsg "skip processing a friendly"
            endif
            @setvar! jaseowns_BOT_STATE 10
        elseif followers > 0 and jaseowns_UseAllGuardInsteadOfAllKill = 1
            settimer jaseowns_BOT_TARGET_SELECTED_TIMER 0
            hotkey "All Guard" 
            if warmode
                @setvar! jaseowns_BOT_STATE 40
            else
                @setvar! jaseowns_BOT_STATE 35
            endif
        elseif followers > 0
            // Fighting.. but we want to guard first
        
            if find jaseowns_EarthPetOne ground -1 -1 18 as jaseowns_MenuSelection
                overhead "Guarding" 89 jaseowns_MenuSelection
                menu jaseowns_MenuSelection 3
                getlabel backpack jaseowns_PingCheck
            endif
            if find jaseowns_EarthPetTwo ground -1 -1 18 as jaseowns_MenuSelection
                overhead "Guarding" 89 jaseowns_MenuSelection
                menu jaseowns_MenuSelection 3
                getlabel backpack jaseowns_PingCheck
            endif
            if find jaseowns_FirePetOne ground -1 -1 18 as jaseowns_MenuSelection
                overhead "Guarding" 89 jaseowns_MenuSelection
                menu jaseowns_MenuSelection 3
                getlabel backpack jaseowns_PingCheck
            endif
            if find jaseowns_FirePetTwo ground -1 -1 18 as jaseowns_MenuSelection
                overhead "Guarding" 89 jaseowns_MenuSelection
                menu jaseowns_MenuSelection 3
                getlabel backpack jaseowns_PingCheck
            endif
            if find jaseowns_DemonPetOne ground -1 -1 18 as jaseowns_MenuSelection
                overhead "Guarding" 89 jaseowns_MenuSelection
                menu jaseowns_MenuSelection 3
                getlabel backpack jaseowns_PingCheck
            endif
            if find jaseowns_DemonPetTwo ground -1 -1 18 as jaseowns_MenuSelection
                overhead "Guarding" 89 jaseowns_MenuSelection
                menu jaseowns_MenuSelection 3
                getlabel backpack jaseowns_PingCheck
            endif
            if find jaseowns_WaterPetOne ground -1 -1 18 as jaseowns_MenuSelection
                overhead "Guarding" 89 jaseowns_MenuSelection
                menu jaseowns_MenuSelection 3
                getlabel backpack jaseowns_PingCheck
            endif
            if find jaseowns_WaterPetTwo ground -1 -1 18 as jaseowns_MenuSelection
                overhead "Guarding" 89 jaseowns_MenuSelection
                menu jaseowns_MenuSelection 3
                getlabel backpack jaseowns_PingCheck
            endif
            if find jaseowns_AirPetOne ground -1 -1 18 as jaseowns_MenuSelection
                overhead "Guarding" 89 jaseowns_MenuSelection
                menu jaseowns_MenuSelection 3
                getlabel backpack jaseowns_PingCheck
            endif
            if find jaseowns_AirPetTwo ground -1 -1 18 as jaseowns_MenuSelection
                overhead "Guarding" 89 jaseowns_MenuSelection
                menu jaseowns_MenuSelection 3
                getlabel backpack jaseowns_PingCheck
            endif
            // TODO: add more pets to guard
            if find jaseowns_SummonCreaturePetOne ground -1 -1 18 as jaseowns_MenuSelection
                overhead "Guarding" 89 jaseowns_MenuSelection
                menu jaseowns_MenuSelection 3
                getlabel backpack jaseowns_PingCheck
            endif
        
            attack jaseowns_BOT_TARGET
            
            
            while not targetexists 
                if jaseowns_DEBUG_MODE = 1
                    sysmsg "ALL KILL NO SKILL" 99
                endif
                hotkey "All kill" 
                getlabel backpack jaseowns_PingCheck
            endwhile
            if targetexists 
                settimer jaseowns_BOT_TARGET_SELECTED_TIMER 0
                target jaseowns_BOT_TARGET
                if warmode
                    @setvar! jaseowns_BOT_STATE 40
                else
                    @setvar! jaseowns_BOT_STATE 35
                endif
            endif
            if targetexists 
                if jaseowns_DEBUG_MODE = 1
                    overhead "All kill no skill cancel"
                endif
                hotkey "Cancel Current Target"
                @setvar! jaseowns_BOT_STATE 10
            endif
        else
            if warmode
                @setvar! jaseowns_BOT_STATE 40
            else
                @setvar! jaseowns_BOT_STATE 35
            endif
        endif

    elseif jaseowns_BOT_STATE = 25
       // and warmode
        if jaseowns_BOT_TARGET != jaseowns_BOT_TARGET_PREVIOUS
            if not targetexists 
                if jaseowns_DEBUG_MODE = 1
                    sysmsg "ARMS LORE SIGHT CHECK" 23
                endif
                useskill "ArmsLore"
                getlabel backpack jaseowns_PingCheck
                while not targetexists and skill "Magery" >= 50
                    cast "Weaken"
                    wft 500
                endwhile
            endif
            if targetexists 
                target jaseowns_BOT_TARGET
                getlabel backpack jaseowns_PingCheck
                if not targetexists 
                    cooldown "LOS Check" jaseowns_ArmsLoreCheckTimerCD
                    if insysmsg "You cannot inspect that"
                        overhead " < Kill this guy > " 99 jaseowns_BOT_TARGET
                        @setvar! jaseowns_BOT_STATE 30        
                    elseif insysmsg "Target cannot be seen"
                        if find jaseowns_BOT_TARGET
                            overhead " < Not able to target > " 34 jaseowns_BOT_TARGET
                        else
                            overhead " < Not able to target > " 34
                        endif
                        @setvar! jaseowns_BOT_STATE 20
                    elseif insysmsg "That is too far away."
                        if find jaseowns_BOT_TARGET
                            overhead " < Too far > " 34 jaseowns_BOT_TARGET
                        else
                            overhead " < Too far > " 34
                        endif
                        @setvar! jaseowns_BOT_STATE 20
                    else
                        overhead " < Kill this guy > " 99 jaseowns_BOT_TARGET
                        @setvar! jaseowns_BOT_STATE 30        
                    endif
                else
                    if jaseowns_DEBUG_MODE = 1
                        overhead "Canceling during bot state 25 (armslore)"
                    endif
                    hotkey "Cancel Current Target"
                    @setvar! jaseowns_BOT_STATE 20
                endif
            endif
            settimer jaseowns_ArmsLoreCheckTimer 0
        elseif timer jaseowns_ArmsLoreCheckTimer >= jaseowns_ArmsLoreCheckTimerCD
            cooldown "LOS Check" 0
            @setvar! jaseowns_BOT_TARGET_PREVIOUS 0
        else
            @setvar! jaseowns_BOT_TARGET_PREVIOUS 0
            @setvar! jaseowns_BOT_STATE 20
        endif

        // do line of sight check
        // if found, goto 30
        // else back to 20

    elseif jaseowns_BOT_STATE = 21
        ## We found a target we do not want to kill
        
        if warmode
            // continue to find target
                    
            hotkey "Next Non-Friendly Monster Target"
            getlabel backpack jaseowns_PingCheck
            if insysmsg "No one matching"
                @setvar! jaseowns_BOT_TARGET_PREVIOUS jaseowns_BOT_TARGET
                @setvar! jaseowns_BOT_TARGET 0
            else
                @setvar! jaseowns_BOT_TARGET_PREVIOUS jaseowns_BOT_TARGET
                @setvar! jaseowns_BOT_TARGET lasttarget
            endif
            
             @setvar! jaseowns_BOT_SELF self                            
            
            if jaseowns_SKIP_LAST_TARGET = jaseowns_BOT_TARGET
                if jaseowns_DEBUG_MODE = 1
                    overhead "Do not attack a friendly face!" 183
                endif
            elseif inlist jaseowns_IGNORE_CREATURES jaseowns_BOT_TARGET
                // do nothing
                if jaseowns_DEBUG_MODE = 1
                    sysmsg "Do nothing we need to ignore that bro" 88
                endif
                @setvar! jaseowns_BOT_STATE 21

                
            elseif not dead jaseowns_BOT_TARGET and find jaseowns_BOT_TARGET ground -1 -1 10
                getlabel jaseowns_BOT_TARGET helperDesc
                 
                if jaseowns_WaitForInvisMob = 1
                    if "banshee" in helperDesc or "apparition" in helperDesc or "skulker" in helperDesc or "wendigo" in helperDesc or "creeping earth" in helperDesc or "creeping soil" in helperDesc or "jaguar" in helperDesc or "camomeal" in helperDesc or "giant chameleon" in helperDesc or "colossal trapdoor spider" in helperDesc or "giant trapdoor spider" in helperDesc or "trapdoor spider" in helperDesc or "chameleon" in helperDesc or "smoke dragon" in helperDesc or "smoke drake    nusero" in helperDesc or "smoke faerie dragon" in helperDesc or "rag witch" in helperDesc or "temple guardian" in helperDesc or "sea hag" in helperDesc or "gargan scorcher" in helperDesc or "nightstalker" in helperDesc or "shade wolf" in helperDesc or "vampiric consort" in helperDesc or "alpha shadowbeast" in helperDesc or "errant core of exodus" in helperDesc or "exothrrug" in helperDesc or "greater smoke dragon" in helperDesc or "navreys broodling" in helperDesc or "ratman rogue" in helperDesc or "shadowbeast" in helperDesc or "sneaking spiderling" in helperDesc or "time lurker" in helperDesc or "arboreal stalker" in helperDesc or "arboreal watcher" in helperDesc or "brigand ambusher" in helperDesc or "bushwhacker   wilderness" in helperDesc or "drow blademaster" in helperDesc or "drow ranger" in helperDesc or "magma serpent" in helperDesc or "minotaur skirmisher" in helperDesc or "sandstalker" in helperDesc
                        settimer jaseowns_BOT_TARGET_IS_INVIS_MOB 0
                    endif
                endif
                
                if timerexists jaseowns_BOT_TARGET_IS_INVIS_MOB 
                    if timer jaseowns_BOT_TARGET_IS_INVIS_MOB >= 30000
                        removetimer jaseowns_BOT_TARGET_IS_INVIS_MOB
                    endif
                endif
        
            
                if "(summoned" in helperDesc or "(bonded" in helperDesc or "(tamed" in helperDesc or "the battle trainer" in helperDesc
                    overhead " Player pet - IGNORE " 77 jaseowns_BOT_TARGET
                    
                    pushlist jaseowns_IGNORE_CREATURES jaseowns_BOT_TARGET
                    
                    @setvar! jaseowns_BOT_TARGET_PREVIOUS 0
                    @setvar! jaseowns_BOT_TARGET 0
                    @setvar! jaseowns_USER_LAST_TARGET 0
                    
               else
                    overhead " THIS GUY HERE " 88 jaseowns_BOT_TARGET
                    @setvar! jaseowns_BOT_STATE 25               
               endif  
            elseif jaseowns_BOT_SELF = jaseowns_BOT_TARGET
                @setvar! jaseowns_SKIP_LAST_TARGET self
                if jaseowns_DEBUG_MODE = 1
                    overhead "dont attack urself bro" 34
                endif
            else
                clearlist jaseowns_OverheadHelperList
                clearlist jaseowns_CastedPoisonList
                clearlist jaseowns_CastedCrusedList
                clearlist jaseowns_CastedManaDrainList
                //getlabel jaseowns_BOT_TARGET testy
                overhead "Not found or too far" 34
            endif
        
        else
            @setvar! jaseowns_BOT_STATE 10
        endif
    
    elseif jaseowns_BOT_STATE = 20 and warmode
        ###
        # Scan for targets
        ###
        // TODO: make sure to target Next Monster Target if we dont wanna target closest
        # hotkey "Target Closest Grey Monster"
        # hotkey "Next Non-Friendly Monster Target"
        #        

        if jaseowns_AutoTargetNearest = 1
            hotkey "Target Closest Non-Friendly Monster"
        else
            hotkey "Set Last Target"
        endif
        
        getlabel backpack jaseowns_PingCheck
        if insysmsg "No one matching"
            @setvar! jaseowns_BOT_TARGET_PREVIOUS jaseowns_BOT_TARGET
            @setvar! jaseowns_BOT_TARGET 0
        else
            @setvar! jaseowns_BOT_TARGET_PREVIOUS jaseowns_BOT_TARGET
            @setvar! jaseowns_BOT_TARGET lasttarget
        endif

        @setvar! jaseowns_BOT_SELF self
        
        if jaseowns_SKIP_LAST_TARGET = jaseowns_BOT_TARGET
            if jaseowns_DEBUG_MODE = 1
                overhead "Do not attack a friendly face!" 183
            endif
        elseif inlist jaseowns_IGNORE_CREATURES jaseowns_BOT_TARGET
            // do nothing
            if jaseowns_DEBUG_MODE = 1
                sysmsg "Do nothing we need to ignore that bro" 88
            endif
            @setvar! jaseowns_BOT_STATE 21

            
        elseif not dead jaseowns_BOT_TARGET and find jaseowns_BOT_TARGET ground -1 -1 10
            getlabel jaseowns_BOT_TARGET helperDesc
 
            if "banshee" in helperDesc or "apparition" in helperDesc or "skulker" in helperDesc or "wendigo" in helperDesc or "creeping earth" in helperDesc or "creeping soil" in helperDesc or "jaguar" in helperDesc or "camomeal" in helperDesc or "giant chameleon" in helperDesc or "colossal trapdoor spider" in helperDesc or "giant trapdoor spider" in helperDesc or "trapdoor spider" in helperDesc or "chameleon" in helperDesc or "smoke dragon" in helperDesc or "smoke drake    nusero" in helperDesc or "smoke faerie dragon" in helperDesc or "rag witch" in helperDesc or "temple guardian" in helperDesc or "sea hag" in helperDesc or "gargan scorcher" in helperDesc or "nightstalker" in helperDesc or "shade wolf" in helperDesc or "vampiric consort" in helperDesc or "alpha shadowbeast" in helperDesc or "errant core of exodus" in helperDesc or "exothrrug" in helperDesc or "greater smoke dragon" in helperDesc or "navreys broodling" in helperDesc or "ratman rogue" in helperDesc or "shadowbeast" in helperDesc or "sneaking spiderling" in helperDesc or "time lurker" in helperDesc or "arboreal stalker" in helperDesc or "arboreal watcher" in helperDesc or "brigand ambusher" in helperDesc or "bushwhacker   wilderness" in helperDesc or "drow blademaster" in helperDesc or "drow ranger" in helperDesc or "magma serpent" in helperDesc or "minotaur skirmisher" in helperDesc or "sandstalker" in helperDesc
                overhead "This was an invis mob"
                settimer jaseowns_BOT_TARGET_IS_INVIS_MOB 0
            endif
            
            if timerexists jaseowns_BOT_TARGET_IS_INVIS_MOB 
                if timer jaseowns_BOT_TARGET_IS_INVIS_MOB >= 30000
                    removetimer jaseowns_BOT_TARGET_IS_INVIS_MOB
                endif
            endif
        
           if "(summoned" in helperDesc or "(bonded" in helperDesc or "(tamed" in helperDesc or "the battle trainer" in helperDesc
                overhead " Player pet - IGNORE " 77 jaseowns_BOT_TARGET
                
                pushlist jaseowns_IGNORE_CREATURES jaseowns_BOT_TARGET
                
                @setvar! jaseowns_BOT_TARGET_PREVIOUS 0
                @setvar! jaseowns_BOT_TARGET 0
                @setvar! jaseowns_USER_LAST_TARGET 0
                
                
           else
                overhead " THIS GUY HERE " 88 jaseowns_BOT_TARGET
                @setvar! jaseowns_BOT_STATE 25               
           endif  
        elseif jaseowns_BOT_SELF = jaseowns_BOT_TARGET
            @setvar! jaseowns_SKIP_LAST_TARGET self
            if jaseowns_DEBUG_MODE = 1
                overhead "dont attack urself bro" 34
            endif
        else
            //getlabel jaseowns_BOT_TARGET testy
            overhead "Not found or too far" 34
        endif
        
        // combat

    

            
        
        
    elseif jaseowns_BOT_STATE = 20
        if followers > 0
            say "all follow me"
        endif
        @setvar! jaseowns_BOT_STATE 10
    elseif jaseowns_BOT_STATE = 15
    
        @clearignore
        
        removelist summonList
        createlist summonList
            
        if followers = 0
            @setvar! followCount 0
        elseif followers = 1
            @setvar! followCount 1
        elseif followers = 2
            @setvar! followCount 2
        elseif followers = 3
            @setvar! followCount 3
        elseif followers = 4
            @setvar! followCount 4
        elseif followers = 5
            @setvar! followCount 5
        endif
        
        @setvar! jaseowns_SummonManaRequired 50
        
        if castSummonEarthElementalCount > 0 or castSummonMummyCount > 0
            if dead jaseowns_EarthPetOne or not find jaseowns_EarthPetOne ground -1 -1 18
                if followers < 4
                    pushlist summonList "Earth Elemental"
                    @setvar! jaseowns_EarthPetOne 1
                endif
            else
                @ignore jaseowns_EarthPetOne
            endif
            if castSummonEarthElementalCount > 1 or castSummonMummyCount > 1
                if dead jaseowns_EarthPetTwo or not find jaseowns_EarthPetTwo ground -1 -1 18
                    if followers < 4
                        pushlist summonList "Earth Elemental"
                        @setvar! jaseowns_EarthPetTwo 1
                    endif
                else
                    @ignore jaseowns_EarthPetTwo
                endif
            endif
        endif
        
        if castSummonFireElementalCount > 0 or castSummonLichCount > 0
            if dead jaseowns_FirePetOne or not find jaseowns_FirePetOne ground -1 -1 18
                if followers < 4
                    pushlist summonList "Fire Elemental"
                    @setvar! jaseowns_FirePetOne 1
                endif
            else 
                @ignore jaseowns_FirePetOne
            endif
            if castSummonFireElementalCount > 1 or castSummonLichCount > 1
                if dead jaseowns_FirePetTwo or not find jaseowns_FirePetTwo ground -1 -1 18
                    if followers < 4
                        pushlist summonList "Fire Elemental"
                        @setvar! jaseowns_FirePetTwo 1
                    endif
                else
                    @ignore jaseowns_FirePetTwo
                endif
            endif
        endif

        if castSummonDemonCount > 0 or castSummonThrallCount > 0
            if dead jaseowns_DemonPetOne or not find jaseowns_DemonPetOne ground -1 -1 18
                if followers < 4
                    pushlist summonList "Summon Daemon"
                    @setvar! jaseowns_DemonPetOne 1
                endif
            else
               @ignore jaseowns_DemonPetOne
            endif
            if castSummonDemonCount > 1 or castSummonThrallCount > 1
                if dead jaseowns_DemonPetTwo or not find jaseowns_DemonPetTwo ground -1 -1 18
                    if followers < 4
                        pushlist summonList "Summon Daemon"
                        @setvar! jaseowns_DemonPetTwo 1
                    endif
                else
                    @ignore jaseowns_DemonPetTwo
                endif
            endif
        endif

        if castSummonAirCount > 0 or castSummonFiendCount > 0
            if dead jaseowns_AirPetOne or not find jaseowns_AirPetOne ground -1 -1 18
                if followers < 4
                    pushlist summonList "Air Elemental"
                    @setvar! jaseowns_AirPetOne 1
                endif
            else
                @ignore jaseowns_AirPetOne
            endif
            if castSummonAirCount > 1 or castSummonFiendCount > 1
                if dead jaseowns_AirPetTwo or not find jaseowns_AirPetTwo ground -1 -1 18
                    if followers < 4
                        pushlist summonList "Air Elemental"
                        @setvar! jaseowns_AirPetTwo 1
                    else
                        @ignore jaseowns_AirPetTwo
                    endif
                endif
            endif
        endif

        if castSummonWaterCount > 0 or castSummonRagWitchCount > 0
            if dead jaseowns_WaterPetOne or not find jaseowns_WaterPetOne ground -1 -1 18
                if followers < 4
                    pushlist summonList "Water Elemental"
                    @setvar! jaseowns_WaterPetOne 1
                endif
            else
                @ignore jaseowns_WaterPetOne
            endif
            if castSummonWaterCount > 1 or castSummonRagWitchCount > 1
                if dead jaseowns_WaterPetTwo or not find jaseowns_WaterPetTwo ground -1 -1 18
                    if followers < 4
                        pushlist summonList "Water Elemental"
                        @setvar! jaseowns_WaterPetTwo 1
                    endif
                else
                    @ignore jaseowns_WaterPetTwo
                endif
            endif
        endif

        if warmode 
            if castEnergyVortexCount > 0 or castJackalSpiritCount > 0
               
                    if dead jaseowns_EvPetOne or not find jaseowns_EvPetOne ground -1 -1 18
                        if followers < 4
                            pushlist summonList "Energy Vortex"
                            @setvar! jaseowns_EvPetOne 1
                        endif
                    else 
                        @ignore jaseowns_EvPetOne
                    endif
               
               
                    if dead jaseowns_EvPetTwo or not find jaseowns_EvPetTwo ground -1 -1 18
                        if followers < 4
                            pushlist summonList "Energy Vortex"
                            @setvar! jaseowns_EvPetTwo 1
                        endif
                    else 
                        @ignore jaseowns_EvPetTwo
                    endif
               
                    
            endif

            if castBladeSpiritCount > 0 or castSkeletalHuskCount > 0
                if dead jaseowns_BsPetOne or not find jaseowns_BsPetOne ground -1 -1 18
                    if followers < 5
                        @setvar! jaseowns_SummonManaRequired 14
                        pushlist summonList "Blade Spirits"
                        @setvar! jaseowns_BsPetOne 1
                    endif
                else 
                    @ignore jaseowns_BsPetOne
                endif
            endif
        endif
        
        if castSummonCreatureCount > 0
            if castSummonCreatureCount >= 1
                if dead jaseowns_SummonCreaturePetOne or not find jaseowns_SummonCreaturePetOne ground -1 -1 18
                    if followers < 5
                        @setvar! jaseowns_SummonManaRequired 14
                        pushlist summonList "Summ. Creature"
                        @setvar! jaseowns_SummonCreaturePetOne 1
                    endif
                else 
                    @ignore jaseowns_SummonCreaturePetOne
                endif
            endif
            
            if castSummonCreatureCount >= 2
                if dead jaseowns_SummonCreaturePetTwo or not find jaseowns_SummonCreaturePetTwo ground -1 -1 18
                    if followers < 5
                        @setvar! jaseowns_SummonManaRequired 14
                        pushlist summonList "Summ. Creature"
                        @setvar! jaseowns_SummonCreaturePetTwo 1
                    endif
                else 
                    @ignore jaseowns_SummonCreaturePetTwo
                endif
            endif
            
            if castSummonCreatureCount >= 3
                if dead jaseowns_SummonCreaturePetThree or not find jaseowns_SummonCreaturePetThree ground -1 -1 18
                    if followers < 5
                        @setvar! jaseowns_SummonManaRequired 14
                        pushlist summonList "Summ. Creature"
                        @setvar! jaseowns_SummonCreaturePetTwo 1
                    endif
                else 
                    @ignore jaseowns_SummonCreaturePetThree
                endif
            endif
            
            if castSummonCreatureCount >= 4
                if dead jaseowns_SummonCreaturePetFour or not find jaseowns_SummonCreaturePetFour ground -1 -1 18
                    if followers < 5
                        @setvar! jaseowns_SummonManaRequired 14
                        pushlist summonList "Summ. Creature"
                        @setvar! jaseowns_SummonCreaturePetTwo 1
                    endif
                else 
                    @ignore jaseowns_SummonCreaturePetFour
                endif
            endif
            
            if castSummonCreatureCount >= 5
                if dead jaseowns_SummonCreaturePetFive or not find jaseowns_SummonCreaturePetFive ground -1 -1 18
                    if followers < 5
                        @setvar! jaseowns_SummonManaRequired 14
                        pushlist summonList "Summ. Creature"
                        @setvar! jaseowns_SummonCreaturePetTwo 1
                    endif
                else 
                    @ignore jaseowns_SummonCreaturePetFive
                endif
            endif
            
        endif
        
        foreach summon in summonList
            if followers < 5
                overhead "Casting Summon: {{summon}}" 88
                while mana < jaseowns_SummonManaRequired
                    if jaseowns_EatShroomies = 1 and timer jaseowns_EatShroomiesTimer >= jaseowns_EatShroomiesTimerCD and diffmana >= jaseowns_EatShroomiesAtDiffMana and findtype 29012 backpack 2963 as item
                        while insysmsg "You are already at your maximum mana." or "You consume a magic mushroom and restore some mana."
                        endwhile
                        dclick item
                        getlabel backpack jaseowns_PingCheck
                        if insysmsg "You are already at your maximum mana."
                            // do nothing
                        elseif insysmsg "You consume a magic mushroom and restore some mana."
                            settimer jaseowns_EatShroomiesTimer 0
                        endif
                        if mana >= jaseowns_SummonManaRequired
                            break
                        endif
                    endif
                    if diffhits >= jaseowns_HitDiffCheckToCastHeal
                        break
                    endif
                    overhead "waiting for mana" 88
                    if not findbuff "Actively Meditating" and skill "meditation" > 0
                        useskill "meditation"
                    endif
                    wait 200
                endwhile
                
                if diffhits >= jaseowns_HitDiffCheckToCastHeal
                    break
                endif
                
                @setvar! jaseowns_NeedVengefulSpirit 0
                
                if summon = "Earth Elemental" and castSummonMummyCount > 0
                    @setvar! jaseowns_NeedVengefulSpirit 1
                elseif summon = "Fire Elemental" and castSummonLichCount > 0
                    @setvar! jaseowns_NeedVengefulSpirit 1
                elseif summon = "Summon Daemon" and castSummonThrallCount > 0
                    @setvar! jaseowns_NeedVengefulSpirit 1
                elseif summon = "Air Elemental" and castSummonFiendCount > 0
                    @setvar! jaseowns_NeedVengefulSpirit 1
                elseif summon = "Water Elemental" and castSummonRagWitchCount > 0
                    @setvar! jaseowns_NeedVengefulSpirit 1
                elseif summon = "Summ. Creature" and skill "Necromancy" >= 50
                    @setvar! jaseowns_NeedVengefulSpirit 1
                elseif summon = "Energy Vortex" and castJackalSpiritCount > 0
                    @setvar! jaseowns_NeedVengefulSpirit 1
                elseif summon = "Blade Spirits" and castSkeletalHuskCount > 0
                    @setvar! jaseowns_NeedVengefulSpirit 1
                endif

                if jaseowns_NeedVengefulSpirit = 1
                    if timer jaseowns_VengefulSpiritTimer >= jaseowns_VengefulSpiritTimerCD and skill "Necromancy" >= 50
                        yell "[VengefulSpirit"
                        settimer jaseowns_VengefulSpiritTimer 0
                        wait 500
                    endif
                elseif timer jaseowns_VengefulSpiritTimer <= jaseowns_VengefulSpiritTimerCD and skill "Necromancy" >= 50
                    overhead  "Waiting for spirit to go away" 88
                    break
                endif

                @setvar! jaseowns_SummonSuccess 1
                while followers = followCount
                    cast summon
                    wft 500
                    if targetexists 
                        hotkey "Target Self"
                        getlabel backpack jaseowns_PingCheck
                    endif
                    if diffhits >= jaseowns_HitDiffCheckToCastHeal
                        if targetexists 
                            hotkey "Cancel Current target"
                        endif
                        hotkey '> Interrupt'
                        @setvar! jaseowns_SummonSuccess 0
                        break
                    elseif insysmsg "You have too many followers to cast that spell"
                        break
                    endif
                    if timer jaseowns_WitherTimer >= jaseowns_WitherTimerCD and skill "Necromancy" >= 95
                        yell "[Wither"
                        settimer jaseowns_WitherTimer 0
                    endif
                endwhile
                
                if jaseowns_SummonSuccess = 1
                    getlabel backpack jaseowns_PingCheck
                    @setvar! jaseowns_AttemptedSummon 0

                    // 158 - an ancient mummy
                    // 14 - an earth elemental
                    if summon = "Earth Elemental" and findtype 158|14 ground -1 -1 12 as myPet

                        while jaseowns_AttemptedSummon = 0 and findtype 158|14 ground -1 -1 12 as jaseowns_PotentialPet
                            if noto jaseowns_PotentialPet = "friend"
                                overhead "Potential Pet" 66 jaseowns_PotentialPet
                                rename jaseowns_PotentialPet "Jaseowns"
                                getlabel jaseowns_PotentialPet jaseowns_PetDescription 
                                if insysmsg "That name is unacceptable"
                                    @setvar! jaseowns_AttemptedSummon jaseowns_PotentialPet    
                                else
                                    @ignore jaseowns_PotentialPet
                                endif
                            else
                                @ignore jaseowns_PotentialPet
                            endif
                        endwhile    

                        if jaseowns_EarthPetOne = 1
                            @setvar! jaseowns_EarthPetOne jaseowns_AttemptedSummon
                        elseif jaseowns_EarthPetTwo = 1
                            @setvar! jaseowns_EarthPetTwo jaseowns_AttemptedSummon
                        endif
                        
                    // 24 - a lich
                    // 15 - a fire elemental
                    elseif summon = "Fire Elemental" and findtype 24|15 ground -1 -1 12
                        
                        while jaseowns_AttemptedSummon = 0 and findtype 24|15 ground -1 -1 12 as jaseowns_PotentialPet
                            if noto jaseowns_PotentialPet = "friend"
                                overhead "Potential Pet" 66 jaseowns_PotentialPet
                                rename jaseowns_PotentialPet "Jaseowns"
                                getlabel jaseowns_PotentialPet jaseowns_PetDescription 
                                if insysmsg "That name is unacceptable"
                                    @setvar! jaseowns_AttemptedSummon jaseowns_PotentialPet    
                                else
                                    @ignore jaseowns_PotentialPet
                                endif
                            else
                                @ignore jaseowns_PotentialPet
                            endif
                        endwhile    

                        if jaseowns_FirePetOne = 1
                            @setvar! jaseowns_FirePetOne jaseowns_AttemptedSummon
                        elseif jaseowns_FirePetTwo = 1
                            @setvar! jaseowns_FirePetTwo jaseowns_AttemptedSummon
                        endif
                        
                    // 9 - a deamon
                    // 722 - a vampire thrall
                    elseif summon = "Summon Daemon" and findtype 9|722 ground -1 -1 12
                        
                        while jaseowns_AttemptedSummon = 0 and findtype 9|722 ground -1 -1 12 as jaseowns_PotentialPet
                            if noto jaseowns_PotentialPet = "friend"
                                overhead "Potential Pet" 66 jaseowns_PotentialPet
                                rename jaseowns_PotentialPet "Jaseowns"
                                getlabel jaseowns_PotentialPet jaseowns_PetDescription 
                                if insysmsg "That name is unacceptable"
                                    @setvar! jaseowns_AttemptedSummon jaseowns_PotentialPet    
                                else
                                    @ignore jaseowns_PotentialPet
                                endif
                            else
                                @ignore jaseowns_PotentialPet
                            endif
                        endwhile    

                        if jaseowns_DemonPetOne = 1
                            @setvar! jaseowns_DemonPetOne jaseowns_AttemptedSummon
                        elseif jaseowns_DemonPetTwo = 1
                            @setvar! jaseowns_DemonPetTwo jaseowns_AttemptedSummon
                        endif
         
                    // 16 - water elemental
                    // 740 - a rag witch
                    elseif summon = "Water Elemental" and findtype 16|740 ground -1 -1 12
                        
                        overhead "We summonmining bro"
                        while jaseowns_AttemptedSummon = 0 and findtype 16|740 ground -1 -1 12 as jaseowns_PotentialPet
                            if noto jaseowns_PotentialPet = "friend"
                                overhead "Potential Pet" 66 jaseowns_PotentialPet
                                rename jaseowns_PotentialPet "Jaseowns"
                                getlabel jaseowns_PotentialPet jaseowns_PetDescription 
                                if insysmsg "That name is unacceptable"
                                    @setvar! jaseowns_AttemptedSummon jaseowns_PotentialPet    
                                else
                                    @ignore jaseowns_PotentialPet
                                endif
                            else
                                @ignore jaseowns_PotentialPet
                            endif
                        endwhile    

                        if jaseowns_WaterPetOne = 1
                            @setvar! jaseowns_WaterPetOne jaseowns_AttemptedSummon
                        elseif jaseowns_WaterPetTwo = 1
                            @setvar! jaseowns_WaterPetTwo jaseowns_AttemptedSummon
                        endif
     
                    // 13 - air elemental
                    // 306 - a skeletal fiend
                    elseif summon = "Air Elemental" and findtype 13|306 ground -1 -1 12
                        
                        while jaseowns_AttemptedSummon = 0 and findtype 13|306 ground -1 -1 12 as jaseowns_PotentialPet
                            if noto jaseowns_PotentialPet = "friend"
                                overhead "Potential Pet" 66 jaseowns_PotentialPet
                                rename jaseowns_PotentialPet "Jaseowns"
                                getlabel jaseowns_PotentialPet jaseowns_PetDescription 
                                if insysmsg "That name is unacceptable"
                                    @setvar! jaseowns_AttemptedSummon jaseowns_PotentialPet    
                                else
                                    @ignore jaseowns_PotentialPet
                                endif
                            else
                                @ignore jaseowns_PotentialPet
                            endif
                        endwhile    

                        if jaseowns_AirPetOne = 1
                            @setvar! jaseowns_AirPetOne jaseowns_AttemptedSummon
                        elseif jaseowns_AirPetTwo = 1
                            @setvar! jaseowns_AirPetTwo jaseowns_AttemptedSummon
                        endif
                                
                    #3   a rotting flesh
                    #3    a zombie
                    #26    a ghoul
                    #29    a blood ape
                    #39    a molten mongbat
                    #50    a skeletal mage
                    #51    shallow water
                    #56    a skeleton
                    #57    a skeletal knight
                    #74    an imp
                    #74    a searing imp
                    #202    a monitor hatchling
                    #206    a searing lizard
                    #211    a black bear
                    #211    a brown bear
                    #212    a grizzly bear
                    #213    a cave bear
                    #213    a polar bear
                    #214    a jaguar
                    #215    an aegis rat
                    #225    a flamehound
                    #302    a corpse eater
                    #302    a skulker
                    #317    a cave bat
                    #317    a firebat
                    #317    a vampire bat
                    #382    a skeletal marksman
                    #716    a primordial whelp
                    #718    a dragon whelp
                    #718    a drake whelp
                    #729    a sand crab
                    #737    a trapdoor spider
                    #739    a wolfhound
                    #776    a fire minion
                    #776    a minion
                    elseif summon = "Summ. Creature" and findtype 3|3|26|29|39|50|51|56|57|74|74|202|206|211|211|212|213|213|214|215|225|302|302|317|317|317|382|716|718|718|729|737|739|776|776 ground -1 -1 12

                        while jaseowns_AttemptedSummon = 0 and findtype 3|3|26|29|39|50|51|56|57|74|74|202|206|211|211|212|213|213|214|215|225|302|302|317|317|317|382|716|718|718|729|737|739|776|776 ground -1 -1 12 as jaseowns_PotentialPet
                            if noto jaseowns_PotentialPet = "friend"
                                overhead "Potential Pet" 66 jaseowns_PotentialPet
                                rename jaseowns_PotentialPet "Jaseowns"
                                getlabel jaseowns_PotentialPet jaseowns_PetDescription 
                                if insysmsg "That name is unacceptable"
                                    @setvar! jaseowns_AttemptedSummon jaseowns_PotentialPet    
                                else
                                    @ignore jaseowns_PotentialPet
                                endif
                            else
                                @ignore jaseowns_PotentialPet
                            endif
                        endwhile    

                        if jaseowns_SummonCreaturePetOne = 1
                            @setvar! jaseowns_SummonCreaturePetOne jaseowns_AttemptedSummon
                        elseif jaseowns_SummonCreaturePetTwo = 1
                            @setvar! jaseowns_SummonCreaturePetTwo jaseowns_AttemptedSummon
                        elseif jaseowns_SummonCreaturePetThree = 1
                            @setvar! jaseowns_SummonCreaturePetThree jaseowns_AttemptedSummon
                        elseif jaseowns_SummonCreaturePetFour = 1
                            @setvar! jaseowns_SummonCreaturePetFour jaseowns_AttemptedSummon
                        elseif jaseowns_SummonCreaturePetFive = 1
                            @setvar! jaseowns_SummonCreaturePetFive jaseowns_AttemptedSummon
                        endif
                        
                    // 13 - an energy vortex
                    // 391 - a jackal spirit
                    elseif summon = "Energy Vortex" and findtype 13|391 ground -1 -1 18 as myPet
                        
                        while jaseowns_AttemptedSummon = 0 and findtype 13|391 ground -1 -1 18 as jaseowns_PotentialPet
                            if noto jaseowns_PotentialPet = "friend"
                                overhead "Potential Pet" 66 jaseowns_PotentialPet
                                rename jaseowns_PotentialPet "Jaseowns"
                                getlabel jaseowns_PotentialPet jaseowns_PetDescription 
                                if insysmsg "That name is unacceptable"
                                    @setvar! jaseowns_AttemptedSummon jaseowns_PotentialPet    
                                else
                                    @ignore jaseowns_PotentialPet
                                endif
                            else
                                @ignore jaseowns_PotentialPet
                            endif
                        endwhile    

                        if jaseowns_EvPetOne = 1
                            @setvar! jaseowns_EvPetOne jaseowns_AttemptedSummon
                        elseif jaseowns_EvPetTwo = 1
                            @setvar! jaseowns_EvPetTwo jaseowns_AttemptedSummon
                        endif

                    // 574 - a blade spirit
                    // 309 - a skeletal husk
                    elseif summon = "Blade Spirits" and findtype 574|309 ground -1 -1 18 as myPet
                        
                        while jaseowns_AttemptedSummon = 0 and findtype 574|309 ground -1 -1 18 as jaseowns_PotentialPet
                            if noto jaseowns_PotentialPet = "friend"
                                overhead "Potential Pet" 66 jaseowns_PotentialPet
                                rename jaseowns_PotentialPet "Jaseowns"
                                getlabel jaseowns_PotentialPet jaseowns_PetDescription 
                                if insysmsg "That name is unacceptable"
                                    @setvar! jaseowns_AttemptedSummon jaseowns_PotentialPet    
                                else
                                    @ignore jaseowns_PotentialPet
                                endif
                            else
                                @ignore jaseowns_PotentialPet
                            endif
                        endwhile    

                        if jaseowns_BsPetOne = 1
                            @setvar! jaseowns_BsPetOne jaseowns_AttemptedSummon
                        endif

                    endif
                    
                    if jaseowns_AttemptedSummon != 0
                        overhead "We summoned this guy" 89 jaseowns_AttemptedSummon
                    endif
                endif
            endif
            break
        endfor
        
        @clearignore
        @setvar! jaseowns_BOT_STATE 10
    
    elseif jaseowns_BOT_STATE = 11
        if jaseowns_CastMagicMushroomCount != 0 and counttype "mushroom" backpack < jaseowns_CastMagicMushroomIfBelowCount
            if mana >= 30
                while counttype "mushroom" backpack < jaseowns_CastMagicMushroomCount
                    cast "Create Food"
                    wait 800
                    if insysmsg "You create cheese which has been placed in your backpack."
                        @setvar! jaseowns_CastMagicMushroomCount 0
                        @setvar! jaseowns_EatShroomies 0
                    endif
                    if diffhits >= 20 or counttype "mushroom" backpack = 0
                        break
                    endif
                endwhile
            endif
        endif
        @setvar! jaseowns_BOT_STATE 10
    elseif jaseowns_BOT_STATE = 10 
       
        @setvar! jaseowns_BOT_BARD_PEACED 0
        @setvar! jaseowns_BOT_BARD_DISCORDED 0
    
        if not queued and jaseowns_CastCunningOnly = 1 and mana >= jaseowns_CastBlessMinMana
            if not findbuff "Cunning"
                while not targetexists 
                    cast "Cunning"
                    getlabel backpack jaseowns_PingCheck
                endwhile
                if targetexists 
                    hotkey "Target Self"
                endif
            endif
        elseif not queued and jaseowns_CastBless = 1 and mana >= jaseowns_CastBlessMinMana
            if not findbuff "Strength" or not findbuff "Agility" or not findbuff "Cunning"
                while not targetexists 
                    cast "Bless"
                    getlabel backpack jaseowns_PingCheck
                endwhile
                if targetexists 
                    hotkey "Target Self"
                endif
            endif
        endif
        
        if not queued and jaseowns_CastReactiveArmor = 1 and mana >= jaseowns_CastReactiveArmorMinMana
            if not findbuff "Reactive Armor" and timer jaseowns_CastReactiveArmorTimer >= 60000
                hotkey "Reactive Armor"
            endif
            
            if findbuff "Reactive Armor"
                settimer jaseowns_CastReactiveArmorTimer 0
            endif
        endif

        if not queued and jaseowns_CastArchProtection = 1 and mana >= jaseowns_CastArchProtectionMinMana
            if not findbuff "Protection" and timer jaseowns_CastArchProtectionTimer >= 2000
                if jaseowns_SUMMONER_MAYBE = 0 or followers >= 4
                    while not targetexists 
                        cast "Arch Protection"
                        getlabel backpack jaseowns_PingCheck
                    endwhile
                    if targetexists 
                        hotkey "Target Self"
                    endif
                endif
            endif
            if findbuff "Protection" 
                settimer jaseowns_CastArchProtectionTimer 0
            endif
        endif


        if not queued and jaseowns_CastMagicReflection = 1 and mana >= jaseowns_CastMagicReflectionMinMana
            if not findbuff "Magic Reflect" and timer jaseowns_CastMagicReflectionTimer >= 60000
                hotkey "Magic Reflection"
            endif
            
            if findbuff "Magic Reflect" 
                settimer jaseowns_CastMagicReflectionTimer 0
            endif
        endif
    
        if warmode
            if timerexists jaseowns_WeCastedSuccessfullyTimer
                removetimer jaseowns_WeCastedSuccessfullyTimer
            endif
            if find jaseowns_MyMainTamerPet ground -1 -1 12 as jasePetInsideLoop
                overhead "Guarding" 88 jasePetInsideLoop
                menu jasePetInsideLoop 3
            endif    
            
            if jaseowns_CastMagicMushroomCount != 0 and counttype "mushroom" backpack < jaseowns_CastMagicMushroomIfBelowCount
                @setvar! jaseowns_BOT_STATE 11
            else
                @setvar! jaseowns_BOT_STATE 20    
            endif   
        else
            if jaseowns_CastMagicMushroomCount != 0 and counttype "mushroom" backpack < jaseowns_CastMagicMushroomIfBelowCount
                @setvar! jaseowns_BOT_STATE 11
            endif    
            if timerexists jaseowns_WeCastedSuccessfullyTimer
                removetimer jaseowns_WeCastedSuccessfullyTimer
            endif
        endif
    elseif jaseowns_BOT_STATE = 999
       sysmsg "{{jaseowns_BOT_STATE}}: Unknown state" 11
    elseif jaseowns_DEBUG_MODE = 1
        sysmsg "{{jaseowns_BOT_STATE}}: Unknown state" 11
    endif

    if jaseowns_BOT_STATE_PREVIOUS != jaseowns_BOT_STATE
        if jaseowns_DEBUG_MODE = 1
            sysmsg "State: {{jaseowns_BOT_STATE}}    Prev: {{jaseowns_BOT_STATE_PREVIOUS}}" 68
        endif
        @setvar! jaseowns_BOT_STATE_PREVIOUS jaseowns_BOT_STATE
    endif

    getlabel backpack jaseowns_PingCheck

endwhile

while dead 
    if jaseowns_YouDiedBroMessage = 1
        overhead "You died bro" 34
    endif
    wait 1000
endwhile